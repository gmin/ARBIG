<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARBIG è°ƒè¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
            line-height: 1.6;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 1000px;
            margin: 0 auto;
        }
        h1, h2 {
            color: #333;
            border-bottom: 2px solid #4caf50;
            padding-bottom: 10px;
        }
        .status {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
        }
        .error {
            background: #ffeaea;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 15px 0;
        }
        .info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
        }
        .test-button {
            background: #4caf50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #45a049;
        }
        #results {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            min-height: 200px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .success { color: #4caf50; font-weight: bold; }
        .error-text { color: #f44336; font-weight: bold; }
        .warning { color: #ff9800; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ARBIG ç³»ç»Ÿè°ƒè¯•é¡µé¢</h1>
        
        <div class="status">
            <h3>âœ… å¦‚æœæ‚¨èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜ï¼š</h3>
            <ul>
                <li>WebæœåŠ¡å™¨æ­£åœ¨æ­£å¸¸è¿è¡Œ</li>
                <li>HTMLæ–‡ä»¶å¯ä»¥æ­£ç¡®åŠ è½½</li>
                <li>CSSæ ·å¼å¯ä»¥æ­£å¸¸åº”ç”¨</li>
                <li>JavaScriptå³å°†å¼€å§‹æ‰§è¡Œ</li>
            </ul>
        </div>
        
        <h2>ğŸ“Š ç³»ç»Ÿä¿¡æ¯</h2>
        <table>
            <tr><td>å½“å‰æ—¶é—´</td><td id="current-time">åŠ è½½ä¸­...</td></tr>
            <tr><td>é¡µé¢URL</td><td id="page-url">åŠ è½½ä¸­...</td></tr>
            <tr><td>ç”¨æˆ·ä»£ç†</td><td id="user-agent">åŠ è½½ä¸­...</td></tr>
            <tr><td>å±å¹•åˆ†è¾¨ç‡</td><td id="screen-resolution">åŠ è½½ä¸­...</td></tr>
            <tr><td>æµè§ˆå™¨è¯­è¨€</td><td id="browser-language">åŠ è½½ä¸­...</td></tr>
        </table>
        
        <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
        <div>
            <button class="test-button" onclick="testBasicJS()">æµ‹è¯•åŸºç¡€JavaScript</button>
            <button class="test-button" onclick="testAPIConnection()">æµ‹è¯•APIè¿æ¥</button>
            <button class="test-button" onclick="testFetch()">æµ‹è¯•FetchåŠŸèƒ½</button>
            <button class="test-button" onclick="testLocalStorage()">æµ‹è¯•æœ¬åœ°å­˜å‚¨</button>
            <button class="test-button" onclick="clearResults()">æ¸…ç©ºç»“æœ</button>
        </div>
        
        <h2>ğŸ“‹ æµ‹è¯•ç»“æœ</h2>
        <div id="results">ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        
        <h2>ğŸ”— å¿«é€Ÿé“¾æ¥</h2>
        <div class="info">
            <p><a href="/" target="_blank">ä¸»é¡µé¢</a> | 
               <a href="/strategy_monitor.html?strategy=shfe_quant" target="_blank">ç­–ç•¥ç›‘æ§</a> | 
               <a href="/api/docs" target="_blank">APIæ–‡æ¡£</a> | 
               <a href="/api/v1/system/status" target="_blank">ç³»ç»ŸçŠ¶æ€</a></p>
        </div>
        
        <h2>âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥</h2>
        <div class="info">
            <h4>å¦‚æœä¸»é¡µé¢æ— æ³•æ˜¾ç¤ºå†…å®¹ï¼š</h4>
            <ol>
                <li><strong>æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜</strong>ï¼šæŒ‰ Ctrl+Shift+R å¼ºåˆ¶åˆ·æ–°</li>
                <li><strong>æ£€æŸ¥å¼€å‘è€…å·¥å…·</strong>ï¼šæŒ‰ F12 æŸ¥çœ‹Consoleå’ŒNetworkæ ‡ç­¾</li>
                <li><strong>å°è¯•æ— ç—•æ¨¡å¼</strong>ï¼šæ’é™¤æ‰©å±•ç¨‹åºå¹²æ‰°</li>
                <li><strong>æ£€æŸ¥JavaScript</strong>ï¼šç¡®è®¤JavaScriptæœªè¢«ç¦ç”¨</li>
                <li><strong>ç½‘ç»œé—®é¢˜</strong>ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œä»£ç†è®¾ç½®</li>
            </ol>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        window.onload = function() {
            updateSystemInfo();
            logMessage('é¡µé¢åŠ è½½å®Œæˆï¼ŒJavaScriptæ­£å¸¸å·¥ä½œï¼');
        };
        
        // æ›´æ–°ç³»ç»Ÿä¿¡æ¯
        function updateSystemInfo() {
            try {
                document.getElementById('current-time').textContent = new Date().toLocaleString('zh-CN');
                document.getElementById('page-url').textContent = window.location.href;
                document.getElementById('user-agent').textContent = navigator.userAgent;
                document.getElementById('screen-resolution').textContent = screen.width + 'x' + screen.height;
                document.getElementById('browser-language').textContent = navigator.language;
                
                // æ¯ç§’æ›´æ–°æ—¶é—´
                setInterval(function() {
                    document.getElementById('current-time').textContent = new Date().toLocaleString('zh-CN');
                }, 1000);
                
            } catch (error) {
                logMessage('æ›´æ–°ç³»ç»Ÿä¿¡æ¯å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ—¥å¿—è®°å½•å‡½æ•°
        function logMessage(message, type = 'info') {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? 'âŒ' : type === 'success' ? 'âœ…' : 'â„¹ï¸';
            results.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            results.scrollTop = results.scrollHeight;
        }
        
        // æµ‹è¯•åŸºç¡€JavaScript
        function testBasicJS() {
            logMessage('å¼€å§‹æµ‹è¯•åŸºç¡€JavaScriptåŠŸèƒ½...');
            
            try {
                // æµ‹è¯•åŸºæœ¬è¿ç®—
                const result = 2 + 2;
                if (result === 4) {
                    logMessage('âœ… åŸºæœ¬è¿ç®—æ­£å¸¸', 'success');
                } else {
                    logMessage('âŒ åŸºæœ¬è¿ç®—å¼‚å¸¸', 'error');
                }
                
                // æµ‹è¯•DOMæ“ä½œ
                const testDiv = document.createElement('div');
                testDiv.textContent = 'æµ‹è¯•';
                if (testDiv.textContent === 'æµ‹è¯•') {
                    logMessage('âœ… DOMæ“ä½œæ­£å¸¸', 'success');
                } else {
                    logMessage('âŒ DOMæ“ä½œå¼‚å¸¸', 'error');
                }
                
                // æµ‹è¯•JSON
                const testObj = {test: 'value'};
                const jsonStr = JSON.stringify(testObj);
                const parsedObj = JSON.parse(jsonStr);
                if (parsedObj.test === 'value') {
                    logMessage('âœ… JSONå¤„ç†æ­£å¸¸', 'success');
                } else {
                    logMessage('âŒ JSONå¤„ç†å¼‚å¸¸', 'error');
                }
                
                logMessage('åŸºç¡€JavaScriptæµ‹è¯•å®Œæˆ');
                
            } catch (error) {
                logMessage('åŸºç¡€JavaScriptæµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æµ‹è¯•APIè¿æ¥
        async function testAPIConnection() {
            logMessage('å¼€å§‹æµ‹è¯•APIè¿æ¥...');
            
            try {
                const response = await fetch('/api/v1/system/status');
                const data = await response.json();
                
                if (response.ok && data.success) {
                    logMessage('âœ… APIè¿æ¥æˆåŠŸ', 'success');
                    logMessage(`ç³»ç»ŸçŠ¶æ€: ${data.data.system_status}`);
                    logMessage(`è¿è¡Œæ¨¡å¼: ${data.data.running_mode}`);
                } else {
                    logMessage('âŒ APIè¿”å›é”™è¯¯: ' + (data.message || 'æœªçŸ¥é”™è¯¯'), 'error');
                }
                
            } catch (error) {
                logMessage('âŒ APIè¿æ¥å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æµ‹è¯•FetchåŠŸèƒ½
        async function testFetch() {
            logMessage('å¼€å§‹æµ‹è¯•FetchåŠŸèƒ½...');
            
            try {
                // æµ‹è¯•è·å–å½“å‰é¡µé¢
                const response = await fetch(window.location.href);
                if (response.ok) {
                    logMessage('âœ… FetchåŠŸèƒ½æ­£å¸¸', 'success');
                    logMessage(`å“åº”çŠ¶æ€: ${response.status} ${response.statusText}`);
                } else {
                    logMessage('âŒ Fetchå“åº”å¼‚å¸¸: ' + response.status, 'error');
                }
                
            } catch (error) {
                logMessage('âŒ FetchåŠŸèƒ½å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æµ‹è¯•æœ¬åœ°å­˜å‚¨
        function testLocalStorage() {
            logMessage('å¼€å§‹æµ‹è¯•æœ¬åœ°å­˜å‚¨...');
            
            try {
                const testKey = 'arbig_test';
                const testValue = 'test_value_' + Date.now();
                
                // æµ‹è¯•å­˜å‚¨
                localStorage.setItem(testKey, testValue);
                const retrievedValue = localStorage.getItem(testKey);
                
                if (retrievedValue === testValue) {
                    logMessage('âœ… æœ¬åœ°å­˜å‚¨æ­£å¸¸', 'success');
                    localStorage.removeItem(testKey);
                } else {
                    logMessage('âŒ æœ¬åœ°å­˜å‚¨å¼‚å¸¸', 'error');
                }
                
            } catch (error) {
                logMessage('âŒ æœ¬åœ°å­˜å‚¨å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ¸…ç©ºç»“æœ
        function clearResults() {
            document.getElementById('results').textContent = 'ç»“æœå·²æ¸…ç©º...\n';
        }
        
        // é”™è¯¯å¤„ç†
        window.onerror = function(message, source, lineno, colno, error) {
            logMessage(`JavaScripté”™è¯¯: ${message} (${source}:${lineno})`, 'error');
        };
        
        // æœªå¤„ç†çš„Promiseé”™è¯¯
        window.addEventListener('unhandledrejection', function(event) {
            logMessage(`æœªå¤„ç†çš„Promiseé”™è¯¯: ${event.reason}`, 'error');
        });
    </script>
</body>
</html>
