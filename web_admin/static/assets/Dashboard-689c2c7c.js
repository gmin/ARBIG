import{c as s,A as P,d as be,b as Oe,r as p,e as w,o as we,f as he,g as b,p as h,k as a,w as n,s as O,j as _,n as k,l as f,t as d,C as Se,m as v,R as ke,E as Ce,F as St,q as kt,x as Ct,h as R,y as $e}from"./index-1d3e8dbe.js";import{P as Pe,a as ze}from"./PlayCircleOutlined-db69d8ca.js";import{R as et}from"./RocketOutlined-082954f3.js";import{S as Le}from"./StopOutlined-d3098fc0.js";import{_ as xe}from"./_plugin-vue_export-helper-c27b6911.js";var Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};const Ae=Me;function $t(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){je(o,c,l[c])})}return o}function je(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var st=function(e,l){var u=$t({},e,l.attrs);return s(P,$t({},u,{icon:Ae}),null)};st.displayName="ApiOutlined";st.inheritAttrs=!1;const Pt=st;var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};const Re=Te;function zt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){De(o,c,l[c])})}return o}function De(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var at=function(e,l){var u=zt({},e,l.attrs);return s(P,zt({},u,{icon:Re}),null)};at.displayName="AppstoreOutlined";at.inheritAttrs=!1;const Ie=at;var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};const Ee=Ne;function Lt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){Ve(o,c,l[c])})}return o}function Ve(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var nt=function(e,l){var u=Lt({},e,l.attrs);return s(P,Lt({},u,{icon:Ee}),null)};nt.displayName="LineChartOutlined";nt.inheritAttrs=!1;const He=nt;var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"};const Ue=Be;function xt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){We(o,c,l[c])})}return o}function We(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var lt=function(e,l){var u=xt({},e,l.attrs);return s(P,xt({},u,{icon:Ue}),null)};lt.displayName="PieChartOutlined";lt.inheritAttrs=!1;const qe=lt;var Fe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};const Ge=Fe;function Mt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){Ye(o,c,l[c])})}return o}function Ye(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var rt=function(e,l){var u=Mt({},e,l.attrs);return s(P,Mt({},u,{icon:Ge}),null)};rt.displayName="SafetyOutlined";rt.inheritAttrs=!1;const At=rt;var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const Qe=Je;function jt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){Xe(o,c,l[c])})}return o}function Xe(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var ot=function(e,l){var u=jt({},e,l.attrs);return s(P,jt({},u,{icon:Qe}),null)};ot.displayName="SettingOutlined";ot.inheritAttrs=!1;const Tt=ot;var Ze={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};const Ke=Ze;function Rt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){ts(o,c,l[c])})}return o}function ts(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var it=function(e,l){var u=Rt({},e,l.attrs);return s(P,Rt({},u,{icon:Ke}),null)};it.displayName="ShoppingCartOutlined";it.inheritAttrs=!1;const es=it;var ss={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"};const as=ss;function Dt(o){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),u.forEach(function(c){ns(o,c,l[c])})}return o}function ns(o,e,l){return e in o?Object.defineProperty(o,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[e]=l,o}var ut=function(e,l){var u=Dt({},e,l.attrs);return s(P,Dt({},u,{icon:as}),null)};ut.displayName="WalletOutlined";ut.inheritAttrs=!1;const ls=ut,rs={class:"dashboard"},os={class:"status-bar"},is={class:"status-icon"},us={class:"status-info"},cs={class:"status-value"},ds={class:"status-item"},vs={class:"status-icon mode-status"},fs={class:"status-info"},ps={class:"status-value"},ms={class:"status-item"},gs={class:"status-icon services-status"},_s={class:"status-info"},ys={class:"status-value"},bs={class:"status-icon"},Os={class:"status-info"},ws={class:"status-value"},hs={class:"status-icon"},Ss={class:"status-info"},ks={class:"status-value"},Cs={class:"status-item"},$s={class:"status-icon uptime-status"},Ps={class:"status-info"},zs={class:"status-value"},Ls={class:"control-section"},xs={class:"services-list"},Ms={key:0,class:"empty-services"},As={class:"service-info"},js={class:"service-name"},Ts={class:"service-actions"},Rs={class:"data-section"},Ds={class:"account-overview"},Is={class:"overview-item"},Ns={class:"overview-value"},Es={class:"overview-item"},Vs={class:"overview-value"},Hs={class:"overview-item"},Bs={class:"overview-value"},Us={class:"overview-item"},Ws={class:"overview-value"},qs={class:"risk-overview"},Fs={class:"overview-item"},Gs={class:"overview-item"},Ys={class:"overview-item"},Js={class:"overview-value risk-warning"},Qs={class:"overview-item"},Xs={class:"overview-value"},Zs={class:"trading-overview"},Ks={class:"overview-item"},ta={class:"overview-value"},ea={class:"overview-item"},sa={class:"overview-value"},aa={class:"overview-item"},na={class:"overview-item"},la={class:"overview-value"},ra={class:"market-section"},oa={key:4,class:"bid-ask"},ia={class:"bid"},ua={class:"ask"},ca={key:5,class:"volume"},da={key:6,class:"timestamp"},va={class:"nav-section"},fa=be({__name:"Dashboard",setup(o){const e=Oe(),l=p(!1),u=p(!1),c=p(""),D=p(""),M=p(""),q=p(!1),ct=p([]),z=p(!1),I=p(null),F=p([]),G=p(!1),C=p("au2507"),L=p(""),Y=p(["au2507"]),J=p(!1),N=p({connection_status:"disconnected",total_requests:0,successful_requests:0,failed_requests:0,current_endpoint:null}),E=p(null),V=p(!1),H=p(!1),A=p({balance:0,available:0,frozen:0,margin:0}),S=p({total_pnl:0,today_pnl:0,max_drawdown:0,risk_level:"LOW"}),x=p({total_trades:0,win_rate:0,avg_trade_pnl:0}),dt=p([]),It=[{title:"合约",key:"symbol",width:100,fixed:"left"},{title:"最新价",key:"last_price",width:100,align:"right"},{title:"涨跌",key:"change",width:80,align:"right"},{title:"涨跌幅",key:"change_percent",width:80,align:"right"},{title:"买一/卖一",key:"bid_ask",width:120,align:"right"},{title:"成交量",key:"volume",width:100,align:"right"},{title:"持仓量",key:"open_interest",width:100,align:"right"},{title:"最高",key:"high",width:80,align:"right"},{title:"最低",key:"low",width:80,align:"right"},{title:"开盘",key:"open",width:80,align:"right"},{title:"时间",key:"timestamp",width:80,align:"center"}],Nt=w(()=>e.isSystemRunning?"running":e.error?"error":"stopped"),Et=w(()=>e.loading?"检查中...":e.isSystemRunning?"运行中":e.error?"主系统未连接":"主系统已停止"),Vt=w(()=>e.uptime),Ht=w(()=>e.error||e.currentMode==="UNKNOWN"?"Web管理模式":{FULL_TRADING:"完整交易",MONITOR_ONLY:"仅监控",MARKET_DATA_ONLY:"仅行情"}[e.currentMode]||e.currentMode),Bt=w(()=>e.servicesSummary.total),Ut=w(()=>e.servicesSummary.running);w(()=>e.servicesSummary.stopped);const Wt=w(()=>{const{marketData:r,trading:t}=e.ctpStatus;return r.connected&&t.connected?"running":r.connected||t.connected?"warning":"stopped"}),qt=w(()=>{const{marketData:r,trading:t}=e.ctpStatus;return r.connected&&t.connected?"全部连接":r.connected?"行情连接":t.connected?"交易连接":"未连接"});w(()=>{const{marketData:r,trading:t}=e.ctpStatus;return r.latency||t.latency||"--"});const Ft=w(()=>{const r=N.value.connection_status;return r==="connected"?"running":r==="connecting"?"warning":"stopped"}),Gt=w(()=>{const r=N.value.connection_status;return r==="connected"?"已连接":r==="connecting"?"连接中":r==="error"?"连接错误":"未连接"});w(()=>{const{total_requests:r,successful_requests:t}=N.value;return r===0?"0%":`${(t/r*100).toFixed(1)}%`});const Yt=async()=>{await e.startSystem()&&O.success("系统启动成功")},Jt=async()=>{await e.stopSystem()&&O.success("系统停止成功")},Qt=async r=>{await e.startService(r)&&O.success(`${r}启动成功`)},Xt=async r=>{await e.stopService(r)&&O.success(`${r}停止成功`)},Zt=async()=>{if(!c.value){O.error("请选择运行模式");return}await e.switchMode(c.value,D.value)&&(O.success("运行模式切换成功"),l.value=!1,D.value="")},Kt=async()=>{if(!M.value.trim()){O.error("请输入停止原因");return}try{q.value=!0,await e.emergencyStop(M.value)&&(O.success("紧急停止执行成功"),u.value=!1,M.value="")}finally{q.value=!1}},te=async()=>{try{console.log("开始获取合约列表..."),G.value=!0;const t=await(await fetch("/api/v1/data/market/contracts")).json();console.log("合约列表API响应:",t),t.success?(F.value=t.data.contracts||[],console.log("成功加载合约列表，数量:",F.value.length)):(console.error("获取合约列表失败:",t.message),O.error("获取合约列表失败"))}catch(r){console.error("获取合约列表错误:",r),O.error("获取合约列表失败")}finally{G.value=!1}},ee=r=>{C.value=r,L.value=""},se=()=>{L.value.trim()&&(C.value=L.value.trim().toUpperCase())},ae=async()=>{if(!C.value){O.warning("请选择或输入合约代码");return}try{if(J.value=!0,Y.value.includes(C.value)){O.info("该合约已在订阅列表中");return}Y.value.push(C.value),await B(),O.success(`成功订阅合约: ${C.value}`),C.value="",L.value=""}catch(r){console.error("订阅合约错误:",r),O.error("订阅合约失败")}finally{J.value=!1}},B=async()=>{try{z.value=!0;const r=Y.value.join(","),m=await(await fetch(`/api/v1/data/market/ticks?symbols=${r}`)).json();m.success?ct.value=m.data.ticks||[]:O.error("获取行情数据失败")}catch(r){console.error("获取行情数据错误:",r),O.error("获取行情数据失败")}finally{z.value=!1}},Q=r=>r>0?"price-up":r<0?"price-down":"price-unchanged",ne=()=>{B(),I.value=setInterval(()=>{B()},2e3)},le=()=>{I.value&&(clearInterval(I.value),I.value=null)},vt=async()=>{try{const t=await(await fetch("/api/communication/stats")).json();t.success&&(N.value=t.data)}catch(r){console.error("获取通信统计信息失败:",r)}},re=()=>{vt(),E.value=setInterval(()=>{vt()},1e4)},oe=()=>{E.value&&(clearInterval(E.value),E.value=null)},ie=()=>{V.value=!V.value},ue=()=>{H.value=!H.value},ft=async()=>{try{const t=await(await fetch("/api/v1/data/account/info")).json();t.success&&(A.value=t.data)}catch(r){console.error("获取账户信息失败:",r)}},pt=async()=>{try{const t=await(await fetch("/api/v1/data/risk/metrics")).json();t.success&&(S.value=t.data)}catch(r){console.error("获取风险指标失败:",r)}},mt=async()=>{try{const t=await(await fetch("/api/trading/summary")).json();t.success&&(x.value=t.data)}catch(r){console.error("获取交易统计失败:",r)}},gt=async()=>{try{const t=await(await fetch("/api/v1/data/account/positions")).json();t.success&&(dt.value=t.data||[])}catch(r){console.error("获取持仓信息失败:",r)}},X=r=>r>0?"pnl-positive":r<0?"pnl-negative":"pnl-neutral",ce=r=>({LOW:"green",MEDIUM:"orange",HIGH:"red",CRITICAL:"red"})[r]||"default",de=()=>{e.fetchServices()};let Z=null;return we(()=>{c.value=e.currentMode,Z=window.setInterval(()=>{e.fetchSystemStatus(),e.fetchServices()},3e3),te(),ne(),re(),ft(),pt(),mt(),gt();const r=window.setInterval(()=>{ft(),pt(),mt(),gt()},1e4);window.dataRefreshTimer=r}),he(()=>{Z&&clearInterval(Z),window.dataRefreshTimer&&clearInterval(window.dataRefreshTimer),le(),oe()}),(r,t)=>{const m=_("a-col"),U=_("a-row"),j=_("a-tag"),y=_("a-button"),W=_("a-space"),$=_("a-card"),ve=_("a-empty"),fe=_("a-select-option"),pe=_("a-select"),me=_("a-input"),ge=_("a-table"),_t=_("a-collapse-panel"),yt=_("a-collapse"),K=_("a-radio"),_e=_("a-radio-group"),tt=_("a-form-item"),bt=_("a-textarea"),Ot=_("a-form"),wt=_("a-modal"),ye=_("a-alert");return b(),h("div",rs,[a("div",os,[s(U,{gutter:[16,16]},{default:n(()=>[s(m,{xs:12,sm:6,md:4,lg:3},{default:n(()=>[a("div",{class:k(["status-item",Nt.value])},[a("div",is,[s(f(et))]),a("div",us,[t[22]||(t[22]=a("div",{class:"status-label"},"系统状态",-1)),a("div",cs,d(Et.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:n(()=>[a("div",ds,[a("div",vs,[s(f(Tt))]),a("div",fs,[t[23]||(t[23]=a("div",{class:"status-label"},"运行模式",-1)),a("div",ps,d(Ht.value),1)])])]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:n(()=>[a("div",ms,[a("div",gs,[s(f(Ie))]),a("div",_s,[t[24]||(t[24]=a("div",{class:"status-label"},"服务状态",-1)),a("div",ys,d(Ut.value)+"/"+d(Bt.value),1)])])]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:n(()=>[a("div",{class:k(["status-item",Wt.value])},[a("div",bs,[s(f(Pt))]),a("div",Os,[t[25]||(t[25]=a("div",{class:"status-label"},"CTP连接",-1)),a("div",ws,d(qt.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:n(()=>[a("div",{class:k(["status-item",Ft.value])},[a("div",hs,[s(f(Pt))]),a("div",Ss,[t[26]||(t[26]=a("div",{class:"status-label"},"主系统通信",-1)),a("div",ks,d(Gt.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:n(()=>[a("div",Cs,[a("div",$s,[s(f(Se))]),a("div",Ps,[t[27]||(t[27]=a("div",{class:"status-label"},"运行时长",-1)),a("div",zs,d(Vt.value),1)])])]),_:1})]),_:1})]),a("div",Ls,[s(U,{gutter:[16,16]},{default:n(()=>[s(m,{xs:24,lg:8},{default:n(()=>[s($,{title:"ARBIG主系统控制",class:"control-card"},{extra:n(()=>[s(j,{color:f(e).isSystemRunning?"green":"red"},{default:n(()=>[v(d(f(e).isSystemRunning?"运行中":"已停止"),1)]),_:1},8,["color"])]),default:n(()=>[s(W,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[s(y,{type:"primary",size:"large",block:"",loading:f(e).loading,disabled:f(e).isSystemRunning,onClick:Yt},{default:n(()=>[s(f(Pe)),t[28]||(t[28]=v(" 启动系统 ",-1))]),_:1,__:[28]},8,["loading","disabled"]),s(y,{size:"large",block:"",loading:f(e).loading,disabled:!f(e).isSystemRunning,onClick:Jt},{default:n(()=>[s(f(ze)),t[29]||(t[29]=v(" 停止系统 ",-1))]),_:1,__:[29]},8,["loading","disabled"]),s(y,{type:"primary",danger:"",size:"large",block:"",onClick:t[0]||(t[0]=i=>u.value=!0)},{default:n(()=>[s(f(Le)),t[30]||(t[30]=v(" 紧急停止 ",-1))]),_:1,__:[30]}),s(y,{type:"dashed",size:"large",block:"",onClick:t[1]||(t[1]=i=>l.value=!0)},{default:n(()=>[s(f(Tt)),t[31]||(t[31]=v(" 切换模式 ",-1))]),_:1,__:[31]})]),_:1})]),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:n(()=>[s($,{title:"服务管理",class:"control-card"},{extra:n(()=>[s(y,{type:"link",size:"small",onClick:de},{default:n(()=>[s(f(ke))]),_:1})]),default:n(()=>[a("div",xs,[f(e).services.length===0?(b(),h("div",Ms,[s(ve,{description:"暂无服务信息",image:f(Ce).PRESENTED_IMAGE_SIMPLE},{description:n(()=>t[32]||(t[32]=[a("span",null,"ARBIG主系统未运行",-1),a("br",null,null,-1),a("span",{style:{"font-size":"12px",color:"#999"}},"启动主系统后可管理以下服务：",-1),a("br",null,null,-1),a("span",{style:{"font-size":"11px",color:"#666","margin-top":"8px",display:"block"}},[v(" • CTP网关服务"),a("br"),v(" • 行情数据服务"),a("br"),v(" • 交易执行服务"),a("br"),v(" • 风险控制服务"),a("br"),v(" • 策略管理服务 ")],-1)])),_:1},8,["image"])])):(b(!0),h(St,{key:1},kt(f(e).services,i=>(b(),h("div",{key:i.name,class:"service-item"},[a("div",As,[a("span",{class:k(["status-indicator",i.status])},null,2),a("span",js,d(i.display_name),1)]),a("div",Ts,[i.status==="stopped"?(b(),R(y,{key:0,type:"primary",size:"small",onClick:g=>Qt(i.name)},{default:n(()=>t[33]||(t[33]=[v(" 启动 ",-1)])),_:2,__:[33]},1032,["onClick"])):i.status==="running"?(b(),R(y,{key:1,size:"small",onClick:g=>Xt(i.name)},{default:n(()=>t[34]||(t[34]=[v(" 停止 ",-1)])),_:2,__:[34]},1032,["onClick"])):(b(),R(y,{key:2,size:"small",disabled:""},{default:n(()=>[v(d(i.status),1)]),_:2},1024))])]))),128))])]),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:n(()=>[s($,{title:"快速操作",class:"control-card"},{extra:n(()=>[s(j,{color:"blue"},{default:n(()=>t[35]||(t[35]=[v("快捷入口",-1)])),_:1,__:[35]})]),default:n(()=>[s(W,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[2]||(t[2]=i=>r.$router.push("/trading"))},{default:n(()=>[s(f(es)),t[36]||(t[36]=v(" 交易操作 ",-1))]),_:1,__:[36]}),s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[3]||(t[3]=i=>r.$router.push("/strategies"))},{default:n(()=>[s(f(et)),t[37]||(t[37]=v(" 策略管理 ",-1))]),_:1,__:[37]}),s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[4]||(t[4]=i=>r.$router.push("/risk"))},{default:n(()=>[s(f(At)),t[38]||(t[38]=v(" 风险控制 ",-1))]),_:1,__:[38]}),s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[5]||(t[5]=i=>r.$router.push("/logs"))},{default:n(()=>[s(f(Ct)),t[39]||(t[39]=v(" 系统日志 ",-1))]),_:1,__:[39]})]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",Rs,[s(U,{gutter:[16,16]},{default:n(()=>[s(m,{xs:24,lg:8},{default:n(()=>[s($,{title:"账户概览",class:"data-card"},{extra:n(()=>[s(y,{type:"link",size:"small",onClick:t[6]||(t[6]=i=>r.$router.push("/account"))},{default:n(()=>t[40]||(t[40]=[v(" 详情 ",-1)])),_:1,__:[40]})]),default:n(()=>{var i,g,T,ht;return[a("div",Ds,[a("div",Is,[t[41]||(t[41]=a("div",{class:"overview-label"},"总资金",-1)),a("div",Ns,"¥"+d(((i=A.value.balance)==null?void 0:i.toLocaleString())||"--"),1)]),a("div",Es,[t[42]||(t[42]=a("div",{class:"overview-label"},"可用资金",-1)),a("div",Vs,"¥"+d(((g=A.value.available)==null?void 0:g.toLocaleString())||"--"),1)]),a("div",Hs,[t[43]||(t[43]=a("div",{class:"overview-label"},"冻结资金",-1)),a("div",Bs,"¥"+d(((T=A.value.frozen)==null?void 0:T.toLocaleString())||"--"),1)]),a("div",Us,[t[44]||(t[44]=a("div",{class:"overview-label"},"保证金",-1)),a("div",Ws,"¥"+d(((ht=A.value.margin)==null?void 0:ht.toLocaleString())||"--"),1)])])]}),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:n(()=>[s($,{title:"风险监控",class:"data-card"},{extra:n(()=>[s(y,{type:"link",size:"small",onClick:t[7]||(t[7]=i=>r.$router.push("/risk"))},{default:n(()=>t[45]||(t[45]=[v(" 详情 ",-1)])),_:1,__:[45]})]),default:n(()=>{var i,g,T;return[a("div",qs,[a("div",Fs,[t[46]||(t[46]=a("div",{class:"overview-label"},"总盈亏",-1)),a("div",{class:k(["overview-value",X(S.value.total_pnl)])},d(S.value.total_pnl>0?"+":"")+"¥"+d(((i=S.value.total_pnl)==null?void 0:i.toLocaleString())||"--"),3)]),a("div",Gs,[t[47]||(t[47]=a("div",{class:"overview-label"},"今日盈亏",-1)),a("div",{class:k(["overview-value",X(S.value.today_pnl)])},d(S.value.today_pnl>0?"+":"")+"¥"+d(((g=S.value.today_pnl)==null?void 0:g.toLocaleString())||"--"),3)]),a("div",Ys,[t[48]||(t[48]=a("div",{class:"overview-label"},"最大回撤",-1)),a("div",Js," ¥"+d(((T=S.value.max_drawdown)==null?void 0:T.toLocaleString())||"--"),1)]),a("div",Qs,[t[49]||(t[49]=a("div",{class:"overview-label"},"风险等级",-1)),a("div",Xs,[s(j,{color:ce(S.value.risk_level)},{default:n(()=>[v(d(S.value.risk_level||"--"),1)]),_:1},8,["color"])])])])]}),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:n(()=>[s($,{title:"交易统计",class:"data-card"},{extra:n(()=>[s(y,{type:"link",size:"small",onClick:t[8]||(t[8]=i=>r.$router.push("/trading"))},{default:n(()=>t[50]||(t[50]=[v(" 详情 ",-1)])),_:1,__:[50]})]),default:n(()=>{var i;return[a("div",Zs,[a("div",Ks,[t[51]||(t[51]=a("div",{class:"overview-label"},"总交易次数",-1)),a("div",ta,d(x.value.total_trades||"--"),1)]),a("div",ea,[t[52]||(t[52]=a("div",{class:"overview-label"},"胜率",-1)),a("div",sa,d(x.value.win_rate||"--")+"%",1)]),a("div",aa,[t[53]||(t[53]=a("div",{class:"overview-label"},"平均盈亏",-1)),a("div",{class:k(["overview-value",X(x.value.avg_trade_pnl)])},d(x.value.avg_trade_pnl>0?"+":"")+"¥"+d(((i=x.value.avg_trade_pnl)==null?void 0:i.toLocaleString())||"--"),3)]),a("div",na,[t[54]||(t[54]=a("div",{class:"overview-label"},"持仓数量",-1)),a("div",la,d(dt.value.length||"--"),1)])])]}),_:1})]),_:1})]),_:1})]),a("div",ra,[s($,{title:"实时行情",class:"market-card",bordered:!1},{extra:n(()=>[s(W,null,{default:n(()=>[s(W,null,{default:n(()=>[s(pe,{value:C.value,"onUpdate:value":t[9]||(t[9]=i=>C.value=i),placeholder:"选择合约",style:{width:"150px"},loading:G.value,onChange:ee,"show-search":"","filter-option":""},{default:n(()=>[(b(!0),h(St,null,kt(F.value,i=>(b(),R(fe,{key:i.symbol,value:i.symbol},{default:n(()=>[v(d(i.symbol)+" - "+d(i.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading"]),s(me,{value:L.value,"onUpdate:value":t[10]||(t[10]=i=>L.value=i),placeholder:"或输入合约代码",style:{width:"120px"},onPressEnter:se},null,8,["value"]),s(y,{type:"primary",onClick:ae,loading:J.value},{default:n(()=>t[55]||(t[55]=[v(" 订阅 ",-1)])),_:1,__:[55]},8,["loading"])]),_:1}),s(j,{color:z.value?"blue":"green"},{default:n(()=>[v(d(z.value?"更新中...":"实时"),1)]),_:1},8,["color"]),s(y,{type:"link",size:"small",onClick:B,loading:z.value},{default:n(()=>t[56]||(t[56]=[v(" 刷新 ",-1)])),_:1,__:[56]},8,["loading"]),s(y,{type:"link",size:"small",onClick:ie},{default:n(()=>[v(d(V.value?"展开":"收起"),1)]),_:1})]),_:1})]),default:n(()=>[s(yt,{activeKey:V.value?[]:["market"]},{default:n(()=>[s(_t,{key:"market","show-arrow":!1},{default:n(()=>[s(ge,{columns:It,"data-source":ct.value,pagination:!1,size:"small",loading:z.value,"row-key":"symbol"},{bodyCell:n(({column:i,record:g})=>[i.key==="symbol"?(b(),R(j,{key:0,color:"gold"},{default:n(()=>[v(d(g.symbol),1)]),_:2},1024)):i.key==="last_price"?(b(),h("span",{key:1,class:k(["price",Q(g.change)])},d(g.last_price),3)):i.key==="change"?(b(),h("span",{key:2,class:k(Q(g.change))},d(g.change>0?"+":"")+d(g.change),3)):i.key==="change_percent"?(b(),h("span",{key:3,class:k(Q(g.change))},d(g.change>0?"+":"")+d(g.change_percent)+"% ",3)):i.key==="bid_ask"?(b(),h("div",oa,[a("div",ia,d(g.bid_price),1),a("div",ua,d(g.ask_price),1)])):i.key==="volume"?(b(),h("span",ca,d(g.volume),1)):i.key==="timestamp"?(b(),h("span",da,d(g.timestamp),1)):$e("",!0)]),_:1},8,["data-source","loading"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),a("div",va,[s($,{title:"快速导航",class:"nav-card",bordered:!1},{extra:n(()=>[s(y,{type:"link",size:"small",onClick:ue},{default:n(()=>[v(d(H.value?"展开":"收起"),1)]),_:1})]),default:n(()=>[s(yt,{activeKey:H.value?[]:["nav"]},{default:n(()=>[s(_t,{key:"nav","show-arrow":!1},{default:n(()=>[s(U,{gutter:[16,16]},{default:n(()=>[s(m,{xs:12,sm:8,md:6,lg:4},{default:n(()=>[a("div",{class:"nav-item",onClick:t[11]||(t[11]=i=>r.$router.push("/market"))},[s(f(He),{class:"nav-icon"}),t[57]||(t[57]=a("div",{class:"nav-text"},"行情数据",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:n(()=>[a("div",{class:"nav-item",onClick:t[12]||(t[12]=i=>r.$router.push("/account"))},[s(f(ls),{class:"nav-icon"}),t[58]||(t[58]=a("div",{class:"nav-text"},"账户资金",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:n(()=>[a("div",{class:"nav-item",onClick:t[13]||(t[13]=i=>r.$router.push("/positions"))},[s(f(qe),{class:"nav-icon"}),t[59]||(t[59]=a("div",{class:"nav-text"},"持仓管理",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:n(()=>[a("div",{class:"nav-item",onClick:t[14]||(t[14]=i=>r.$router.push("/strategies"))},[s(f(et),{class:"nav-icon"}),t[60]||(t[60]=a("div",{class:"nav-text"},"策略管理",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:n(()=>[a("div",{class:"nav-item",onClick:t[15]||(t[15]=i=>r.$router.push("/risk"))},[s(f(At),{class:"nav-icon"}),t[61]||(t[61]=a("div",{class:"nav-text"},"风险控制",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:n(()=>[a("div",{class:"nav-item",onClick:t[16]||(t[16]=i=>r.$router.push("/logs"))},[s(f(Ct),{class:"nav-icon"}),t[62]||(t[62]=a("div",{class:"nav-text"},"系统日志",-1))])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),s(wt,{open:l.value,"onUpdate:open":t[19]||(t[19]=i=>l.value=i),title:"切换运行模式",onOk:Zt},{default:n(()=>[s(Ot,{layout:"vertical"},{default:n(()=>[s(tt,{label:"选择运行模式"},{default:n(()=>[s(_e,{value:c.value,"onUpdate:value":t[17]||(t[17]=i=>c.value=i)},{default:n(()=>[s(K,{value:"FULL_TRADING"},{default:n(()=>t[63]||(t[63]=[v("完整交易模式",-1)])),_:1,__:[63]}),s(K,{value:"MONITOR_ONLY"},{default:n(()=>t[64]||(t[64]=[v("仅监控模式",-1)])),_:1,__:[64]}),s(K,{value:"MARKET_DATA_ONLY"},{default:n(()=>t[65]||(t[65]=[v("仅行情模式",-1)])),_:1,__:[65]})]),_:1},8,["value"])]),_:1}),s(tt,{label:"切换原因"},{default:n(()=>[s(bt,{value:D.value,"onUpdate:value":t[18]||(t[18]=i=>D.value=i),placeholder:"请输入切换原因..."},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"]),s(wt,{open:u.value,"onUpdate:open":t[21]||(t[21]=i=>u.value=i),title:"紧急停止确认","confirm-loading":q.value,onOk:Kt},{default:n(()=>[s(ye,{message:"警告",description:"紧急停止将立即停止所有交易活动，请确认操作原因。",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),s(Ot,{layout:"vertical"},{default:n(()=>[s(tt,{label:"停止原因",required:""},{default:n(()=>[s(bt,{value:M.value,"onUpdate:value":t[20]||(t[20]=i=>M.value=i),placeholder:"请输入紧急停止的原因...",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])])}}});const ba=xe(fa,[["__scopeId","data-v-794e042f"]]);export{ba as default};
