import{c as o,A as w,d as ce,u as ie,a as de,b as me,r as f,e as h,o as fe,f as pe,g as p,h as g,w as s,i as ve,j as u,k as d,l as m,n as _e,t as S,m as M,D as ge,p as ye,q as Oe,F as be,s as U,v as he}from"./index-e0f8412d.js";import{R as Se}from"./RocketOutlined-ca28f860.js";import{S as Me}from"./StopOutlined-ea1f1266.js";import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";var Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const Pe=Le;function B(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){je(n,r,t[r])})}return n}function je(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var z=function(e,t){var a=B({},e,t.attrs);return o(w,B({},a,{icon:Pe}),null)};z.displayName="LogoutOutlined";z.inheritAttrs=!1;const xe=z;var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};const ze=Ue;function E(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){$e(n,r,t[r])})}return n}function $e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $=function(e,t){var a=E({},e,t.attrs);return o(w,E({},a,{icon:ze}),null)};$.displayName="MenuFoldOutlined";$.inheritAttrs=!1;const Ae=$;var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"};const Re=Ce;function F(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){De(n,r,t[r])})}return n}function De(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var A=function(e,t){var a=F({},e,t.attrs);return o(w,F({},a,{icon:Re}),null)};A.displayName="MenuUnfoldOutlined";A.inheritAttrs=!1;const He=A;var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const Ie=Ne;function k(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){Te(n,r,t[r])})}return n}function Te(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var C=function(e,t){var a=k({},e,t.attrs);return o(w,k({},a,{icon:Ie}),null)};C.displayName="UserOutlined";C.inheritAttrs=!1;const Y=C,Be={class:"header-left"},Ee={class:"logo"},Fe={class:"header-center"},ke={class:"system-status"},Ye={class:"status-text"},Ve={class:"mode-text"},qe={class:"header-right"},Ge={class:"system-time"},Je={class:"content-wrapper"},Qe=ce({__name:"Layout",setup(n){const e=ie(),t=de(),a=me(),r=f(!1),y=f([]),R=f(""),O=f(!1),v=f(""),L=f(!1),V=h(()=>e.getRoutes().filter(c=>c.meta&&!c.meta.hideInMenu&&c.name!=="Layout").sort((c,l)=>{var b,_;return(((b=c.meta)==null?void 0:b.order)||0)-(((_=l.meta)==null?void 0:_.order)||0)})),q=h(()=>a.isSystemRunning?"running":a.error?"error":"stopped"),G=h(()=>a.loading?"检查中...":a.isSystemRunning?"系统运行中":a.error?"系统异常":"系统已停止"),J=h(()=>({FULL_TRADING:"完整交易模式",MONITOR_ONLY:"仅监控模式",MARKET_DATA_ONLY:"仅行情模式"})[a.currentMode]||a.currentMode),D=()=>{R.value=ve().format("YYYY-MM-DD HH:mm:ss")},Q=({key:c})=>{e.push({name:c})},W=async()=>{if(!v.value.trim()){U.error("请输入停止原因");return}try{L.value=!0,await a.emergencyStop(v.value)&&(U.success("紧急停止执行成功"),O.value=!1,v.value="")}catch{U.error("紧急停止执行失败")}finally{L.value=!1}};let P=null,j=null;return fe(()=>{y.value=[t.name],D(),P=window.setInterval(D,1e3),j=window.setInterval(()=>{a.fetchSystemStatus()},5e3)}),pe(()=>{P&&clearInterval(P),j&&clearInterval(j)}),e.afterEach(c=>{y.value=[c.name]}),(c,l)=>{const b=u("a-divider"),_=u("a-button"),x=u("a-menu-item"),X=u("a-menu-divider"),H=u("a-menu"),Z=u("a-dropdown"),K=u("a-space"),ee=u("a-layout-header"),te=u("a-layout-sider"),ne=u("router-view"),ae=u("a-layout-content"),N=u("a-layout"),oe=u("a-alert"),re=u("a-textarea"),le=u("a-form-item"),se=u("a-form"),ue=u("a-modal");return p(),g(N,{class:"layout"},{default:s(()=>[o(ee,{class:"header"},{default:s(()=>[d("div",Be,[d("div",Ee,[o(m(Se),{class:"logo-icon"}),l[6]||(l[6]=d("span",{class:"logo-text"},"ARBIG量化交易系统",-1))])]),d("div",Fe,[d("div",ke,[d("span",{class:_e(["status-indicator",q.value])},null,2),d("span",Ye,S(G.value),1),o(b,{type:"vertical"}),d("span",Ve,S(J.value),1)])]),d("div",qe,[o(K,null,{default:s(()=>[d("div",Ge,S(R.value),1),o(_,{type:"primary",danger:"",size:"small",onClick:l[0]||(l[0]=i=>O.value=!0)},{default:s(()=>[o(m(Me)),l[7]||(l[7]=M(" 紧急停止 ",-1))]),_:1,__:[7]}),o(Z,null,{overlay:s(()=>[o(H,null,{default:s(()=>[o(x,{key:"profile"},{default:s(()=>[o(m(Y)),l[9]||(l[9]=M(" 个人设置 ",-1))]),_:1,__:[9]}),o(X),o(x,{key:"logout"},{default:s(()=>[o(m(xe)),l[10]||(l[10]=M(" 退出登录 ",-1))]),_:1,__:[10]})]),_:1})]),default:s(()=>[o(_,{type:"text",class:"user-button"},{default:s(()=>[o(m(Y)),l[8]||(l[8]=M(" 管理员 ",-1)),o(m(ge))]),_:1,__:[8]})]),_:1})]),_:1})])]),_:1}),o(N,null,{default:s(()=>[o(te,{collapsed:r.value,"onUpdate:collapsed":l[3]||(l[3]=i=>r.value=i),trigger:null,collapsible:"",width:"240",class:"sider"},{default:s(()=>[d("div",{class:"sider-trigger",onClick:l[1]||(l[1]=i=>r.value=!r.value)},[r.value?(p(),g(m(He),{key:0})):(p(),g(m(Ae),{key:1}))]),o(H,{selectedKeys:y.value,"onUpdate:selectedKeys":l[2]||(l[2]=i=>y.value=i),mode:"inline",theme:"light","inline-collapsed":r.value,onClick:Q},{default:s(()=>[(p(!0),ye(be,null,Oe(V.value,i=>(p(),g(x,{key:i.name},{default:s(()=>{var I,T;return[(p(),g(he(((I=i.meta)==null?void 0:I.icon)||"AppstoreOutlined"))),d("span",null,S((T=i.meta)==null?void 0:T.title),1)]}),_:2},1024))),128))]),_:1},8,["selectedKeys","inline-collapsed"])]),_:1},8,["collapsed"]),o(ae,{class:"content"},{default:s(()=>[d("div",Je,[o(ne)])]),_:1})]),_:1}),o(ue,{open:O.value,"onUpdate:open":l[5]||(l[5]=i=>O.value=i),title:"紧急停止确认","confirm-loading":L.value,onOk:W},{default:s(()=>[o(oe,{message:"警告",description:"紧急停止将立即停止所有交易活动，请确认操作原因。",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),o(se,{layout:"vertical"},{default:s(()=>[o(le,{label:"停止原因",required:""},{default:s(()=>[o(re,{value:v.value,"onUpdate:value":l[4]||(l[4]=i=>v.value=i),placeholder:"请输入紧急停止的原因...",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])]),_:1})}}});const et=we(Qe,[["__scopeId","data-v-48f05b5d"]]);export{et as default};
