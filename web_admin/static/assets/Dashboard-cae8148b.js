import{c as s,A as $,d as ae,b as ne,r as _,e as b,o as le,f as re,g as O,p as k,k as a,w as l,s as h,j as y,n as S,l as v,t as d,C as ie,m as f,R as oe,F as ue,q as ce,x as _t,h as N,y as de}from"./index-d3a861e1.js";import{P as ve,a as fe}from"./PlayCircleOutlined-0b878e42.js";import{R as J}from"./RocketOutlined-adb9be50.js";import{S as pe}from"./StopOutlined-aa844f19.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";var ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};const _e=ge;function yt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){ye(r,c,n[c])})}return r}function ye(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Q=function(e,n){var o=yt({},e,n.attrs);return s($,yt({},o,{icon:_e}),null)};Q.displayName="ApiOutlined";Q.inheritAttrs=!1;const bt=Q;var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};const Oe=be;function Ot(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){we(r,c,n[c])})}return r}function we(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var X=function(e,n){var o=Ot({},e,n.attrs);return s($,Ot({},o,{icon:Oe}),null)};X.displayName="AppstoreOutlined";X.inheritAttrs=!1;const he=X;var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};const ke=Se;function wt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){Ce(r,c,n[c])})}return r}function Ce(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Z=function(e,n){var o=wt({},e,n.attrs);return s($,wt({},o,{icon:ke}),null)};Z.displayName="LineChartOutlined";Z.inheritAttrs=!1;const $e=Z;var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"};const Pe=ze;function ht(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){Le(r,c,n[c])})}return r}function Le(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var K=function(e,n){var o=ht({},e,n.attrs);return s($,ht({},o,{icon:Pe}),null)};K.displayName="PieChartOutlined";K.inheritAttrs=!1;const xe=K;var Me={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};const Ae=Me;function St(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){je(r,c,n[c])})}return r}function je(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var tt=function(e,n){var o=St({},e,n.attrs);return s($,St({},o,{icon:Ae}),null)};tt.displayName="SafetyOutlined";tt.inheritAttrs=!1;const kt=tt;var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const De=Te;function Ct(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){Re(r,c,n[c])})}return r}function Re(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var et=function(e,n){var o=Ct({},e,n.attrs);return s($,Ct({},o,{icon:De}),null)};et.displayName="SettingOutlined";et.inheritAttrs=!1;const $t=et;var Ve={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};const Ie=Ve;function zt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){He(r,c,n[c])})}return r}function He(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var st=function(e,n){var o=zt({},e,n.attrs);return s($,zt({},o,{icon:Ie}),null)};st.displayName="ShoppingCartOutlined";st.inheritAttrs=!1;const Ne=st;var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"};const Be=Ee;function Pt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),o.forEach(function(c){Ue(r,c,n[c])})}return r}function Ue(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var at=function(e,n){var o=Pt({},e,n.attrs);return s($,Pt({},o,{icon:Be}),null)};at.displayName="WalletOutlined";at.inheritAttrs=!1;const We=at,qe={class:"dashboard"},Fe={class:"status-bar"},Ye={class:"status-icon"},Ge={class:"status-info"},Je={class:"status-value"},Qe={class:"status-item"},Xe={class:"status-icon mode-status"},Ze={class:"status-info"},Ke={class:"status-value"},ts={class:"status-item"},es={class:"status-icon services-status"},ss={class:"status-info"},as={class:"status-value"},ns={class:"status-icon"},ls={class:"status-info"},rs={class:"status-value"},is={class:"status-icon"},os={class:"status-info"},us={class:"status-value"},cs={class:"status-item"},ds={class:"status-icon uptime-status"},vs={class:"status-info"},fs={class:"status-value"},ps={class:"control-section"},ms={class:"services-list"},gs={class:"service-info"},_s={class:"service-name"},ys={class:"service-actions"},bs={class:"data-section"},Os={class:"account-overview"},ws={class:"overview-item"},hs={class:"overview-value"},Ss={class:"overview-item"},ks={class:"overview-value"},Cs={class:"overview-item"},$s={class:"overview-value"},zs={class:"overview-item"},Ps={class:"overview-value"},Ls={class:"risk-overview"},xs={class:"overview-item"},Ms={class:"overview-item"},As={class:"overview-item"},js={class:"overview-value risk-warning"},Ts={class:"overview-item"},Ds={class:"overview-value"},Rs={class:"trading-overview"},Vs={class:"overview-item"},Is={class:"overview-value"},Hs={class:"overview-item"},Ns={class:"overview-value"},Es={class:"overview-item"},Bs={class:"overview-item"},Us={class:"overview-value"},Ws={class:"market-section"},qs={key:4,class:"bid-ask"},Fs={class:"bid"},Ys={class:"ask"},Gs={key:5,class:"volume"},Js={key:6,class:"timestamp"},Qs={class:"nav-section"},Xs=ae({__name:"Dashboard",setup(r){const e=ne(),n=_(!1),o=_(!1),c=_(""),j=_(""),L=_(""),E=_(!1),nt=_([]),z=_(!1),T=_(null),D=_({connection_status:"disconnected",total_requests:0,successful_requests:0,failed_requests:0,current_endpoint:null}),R=_(null),V=_(!1),I=_(!1),x=_({balance:0,available:0,frozen:0,margin:0}),w=_({total_pnl:0,today_pnl:0,max_drawdown:0,risk_level:"LOW"}),P=_({total_trades:0,win_rate:0,avg_trade_pnl:0}),lt=_([]),Lt=[{title:"合约",key:"symbol",width:100,fixed:"left"},{title:"最新价",key:"last_price",width:100,align:"right"},{title:"涨跌",key:"change",width:80,align:"right"},{title:"涨跌幅",key:"change_percent",width:80,align:"right"},{title:"买一/卖一",key:"bid_ask",width:120,align:"right"},{title:"成交量",key:"volume",width:100,align:"right"},{title:"持仓量",key:"open_interest",width:100,align:"right"},{title:"最高",key:"high",width:80,align:"right"},{title:"最低",key:"low",width:80,align:"right"},{title:"开盘",key:"open",width:80,align:"right"},{title:"时间",key:"timestamp",width:80,align:"center"}],xt=b(()=>e.isSystemRunning?"running":e.error?"error":"stopped"),Mt=b(()=>e.loading?"检查中...":e.isSystemRunning?"运行中":e.error?"异常":"已停止"),At=b(()=>e.uptime),jt=b(()=>({FULL_TRADING:"完整交易",MONITOR_ONLY:"仅监控",MARKET_DATA_ONLY:"仅行情"})[e.currentMode]||e.currentMode),Tt=b(()=>e.servicesSummary.total),Dt=b(()=>e.servicesSummary.running);b(()=>e.servicesSummary.stopped);const Rt=b(()=>{const{marketData:i,trading:t}=e.ctpStatus;return i.connected&&t.connected?"running":i.connected||t.connected?"warning":"stopped"}),Vt=b(()=>{const{marketData:i,trading:t}=e.ctpStatus;return i.connected&&t.connected?"全部连接":i.connected?"行情连接":t.connected?"交易连接":"未连接"});b(()=>{const{marketData:i,trading:t}=e.ctpStatus;return i.latency||t.latency||"--"});const It=b(()=>{const i=D.value.connection_status;return i==="connected"?"running":i==="connecting"?"warning":"stopped"}),Ht=b(()=>{const i=D.value.connection_status;return i==="connected"?"已连接":i==="connecting"?"连接中":i==="error"?"连接错误":"未连接"});b(()=>{const{total_requests:i,successful_requests:t}=D.value;return i===0?"0%":`${(t/i*100).toFixed(1)}%`});const Nt=async()=>{await e.startSystem()&&h.success("系统启动成功")},Et=async()=>{await e.stopSystem()&&h.success("系统停止成功")},Bt=async i=>{await e.startService(i)&&h.success(`${i}启动成功`)},Ut=async i=>{await e.stopService(i)&&h.success(`${i}停止成功`)},Wt=async()=>{if(!c.value){h.error("请选择运行模式");return}await e.switchMode(c.value,j.value)&&(h.success("运行模式切换成功"),n.value=!1,j.value="")},qt=async()=>{if(!L.value.trim()){h.error("请输入停止原因");return}try{E.value=!0,await e.emergencyStop(L.value)&&(h.success("紧急停止执行成功"),o.value=!1,L.value="")}finally{E.value=!1}},B=async()=>{try{z.value=!0;const t=await(await fetch("/api/v1/data/market/ticks?symbols=au2507")).json();t.success?nt.value=t.data.ticks||[]:h.error("获取行情数据失败")}catch(i){console.error("获取行情数据错误:",i),h.error("获取行情数据失败")}finally{z.value=!1}},U=i=>i>0?"price-up":i<0?"price-down":"price-unchanged",Ft=()=>{B(),T.value=setInterval(()=>{B()},2e3)},Yt=()=>{T.value&&(clearInterval(T.value),T.value=null)},rt=async()=>{try{const t=await(await fetch("/api/communication/stats")).json();t.success&&(D.value=t.data)}catch(i){console.error("获取通信统计信息失败:",i)}},Gt=()=>{rt(),R.value=setInterval(()=>{rt()},1e4)},Jt=()=>{R.value&&(clearInterval(R.value),R.value=null)},Qt=()=>{V.value=!V.value},Xt=()=>{I.value=!I.value},it=async()=>{try{const t=await(await fetch("/api/v1/data/account/info")).json();t.success&&(x.value=t.data)}catch(i){console.error("获取账户信息失败:",i)}},ot=async()=>{try{const t=await(await fetch("/api/v1/data/risk/metrics")).json();t.success&&(w.value=t.data)}catch(i){console.error("获取风险指标失败:",i)}},ut=async()=>{try{const t=await(await fetch("/api/trading/summary")).json();t.success&&(P.value=t.data)}catch(i){console.error("获取交易统计失败:",i)}},ct=async()=>{try{const t=await(await fetch("/api/v1/data/account/positions")).json();t.success&&(lt.value=t.data||[])}catch(i){console.error("获取持仓信息失败:",i)}},W=i=>i>0?"pnl-positive":i<0?"pnl-negative":"pnl-neutral",Zt=i=>({LOW:"green",MEDIUM:"orange",HIGH:"red",CRITICAL:"red"})[i]||"default",Kt=()=>{e.fetchServices()};let q=null;return le(()=>{c.value=e.currentMode,q=window.setInterval(()=>{e.fetchSystemStatus(),e.fetchServices()},3e3),Ft(),Gt(),it(),ot(),ut(),ct();const i=window.setInterval(()=>{it(),ot(),ut(),ct()},1e4);window.dataRefreshTimer=i}),re(()=>{q&&clearInterval(q),window.dataRefreshTimer&&clearInterval(window.dataRefreshTimer),Yt(),Jt()}),(i,t)=>{const m=y("a-col"),H=y("a-row"),M=y("a-tag"),g=y("a-button"),F=y("a-space"),C=y("a-card"),te=y("a-table"),dt=y("a-collapse-panel"),vt=y("a-collapse"),Y=y("a-radio"),ee=y("a-radio-group"),G=y("a-form-item"),ft=y("a-textarea"),pt=y("a-form"),mt=y("a-modal"),se=y("a-alert");return O(),k("div",qe,[a("div",Fe,[s(H,{gutter:[16,16]},{default:l(()=>[s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",{class:S(["status-item",xt.value])},[a("div",Ye,[s(v(J))]),a("div",Ge,[t[20]||(t[20]=a("div",{class:"status-label"},"系统状态",-1)),a("div",Je,d(Mt.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",Qe,[a("div",Xe,[s(v($t))]),a("div",Ze,[t[21]||(t[21]=a("div",{class:"status-label"},"运行模式",-1)),a("div",Ke,d(jt.value),1)])])]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",ts,[a("div",es,[s(v(he))]),a("div",ss,[t[22]||(t[22]=a("div",{class:"status-label"},"服务状态",-1)),a("div",as,d(Dt.value)+"/"+d(Tt.value),1)])])]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",{class:S(["status-item",Rt.value])},[a("div",ns,[s(v(bt))]),a("div",ls,[t[23]||(t[23]=a("div",{class:"status-label"},"CTP连接",-1)),a("div",rs,d(Vt.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",{class:S(["status-item",It.value])},[a("div",is,[s(v(bt))]),a("div",os,[t[24]||(t[24]=a("div",{class:"status-label"},"主系统通信",-1)),a("div",us,d(Ht.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",cs,[a("div",ds,[s(v(ie))]),a("div",vs,[t[25]||(t[25]=a("div",{class:"status-label"},"运行时长",-1)),a("div",fs,d(At.value),1)])])]),_:1})]),_:1})]),a("div",ps,[s(H,{gutter:[16,16]},{default:l(()=>[s(m,{xs:24,lg:8},{default:l(()=>[s(C,{title:"系统控制",class:"control-card"},{extra:l(()=>[s(M,{color:v(e).isSystemRunning?"green":"red"},{default:l(()=>[f(d(v(e).isSystemRunning?"运行中":"已停止"),1)]),_:1},8,["color"])]),default:l(()=>[s(F,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[s(g,{type:"primary",size:"large",block:"",loading:v(e).loading,disabled:v(e).isSystemRunning,onClick:Nt},{default:l(()=>[s(v(ve)),t[26]||(t[26]=f(" 启动系统 ",-1))]),_:1,__:[26]},8,["loading","disabled"]),s(g,{size:"large",block:"",loading:v(e).loading,disabled:!v(e).isSystemRunning,onClick:Et},{default:l(()=>[s(v(fe)),t[27]||(t[27]=f(" 停止系统 ",-1))]),_:1,__:[27]},8,["loading","disabled"]),s(g,{type:"primary",danger:"",size:"large",block:"",onClick:t[0]||(t[0]=u=>o.value=!0)},{default:l(()=>[s(v(pe)),t[28]||(t[28]=f(" 紧急停止 ",-1))]),_:1,__:[28]}),s(g,{type:"dashed",size:"large",block:"",onClick:t[1]||(t[1]=u=>n.value=!0)},{default:l(()=>[s(v($t)),t[29]||(t[29]=f(" 切换模式 ",-1))]),_:1,__:[29]})]),_:1})]),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s(C,{title:"服务管理",class:"control-card"},{extra:l(()=>[s(g,{type:"link",size:"small",onClick:Kt},{default:l(()=>[s(v(oe))]),_:1})]),default:l(()=>[a("div",ms,[(O(!0),k(ue,null,ce(v(e).services,u=>(O(),k("div",{key:u.name,class:"service-item"},[a("div",gs,[a("span",{class:S(["status-indicator",u.status])},null,2),a("span",_s,d(u.display_name),1)]),a("div",ys,[u.status==="stopped"?(O(),N(g,{key:0,type:"primary",size:"small",onClick:p=>Bt(u.name)},{default:l(()=>t[30]||(t[30]=[f(" 启动 ",-1)])),_:2,__:[30]},1032,["onClick"])):u.status==="running"?(O(),N(g,{key:1,size:"small",onClick:p=>Ut(u.name)},{default:l(()=>t[31]||(t[31]=[f(" 停止 ",-1)])),_:2,__:[31]},1032,["onClick"])):(O(),N(g,{key:2,size:"small",disabled:""},{default:l(()=>[f(d(u.status),1)]),_:2},1024))])]))),128))])]),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s(C,{title:"快速操作",class:"control-card"},{extra:l(()=>[s(M,{color:"blue"},{default:l(()=>t[32]||(t[32]=[f("快捷入口",-1)])),_:1,__:[32]})]),default:l(()=>[s(F,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[s(g,{type:"primary",ghost:"",size:"large",block:"",onClick:t[2]||(t[2]=u=>i.$router.push("/trading"))},{default:l(()=>[s(v(Ne)),t[33]||(t[33]=f(" 交易操作 ",-1))]),_:1,__:[33]}),s(g,{type:"primary",ghost:"",size:"large",block:"",onClick:t[3]||(t[3]=u=>i.$router.push("/strategies"))},{default:l(()=>[s(v(J)),t[34]||(t[34]=f(" 策略管理 ",-1))]),_:1,__:[34]}),s(g,{type:"primary",ghost:"",size:"large",block:"",onClick:t[4]||(t[4]=u=>i.$router.push("/risk"))},{default:l(()=>[s(v(kt)),t[35]||(t[35]=f(" 风险控制 ",-1))]),_:1,__:[35]}),s(g,{type:"primary",ghost:"",size:"large",block:"",onClick:t[5]||(t[5]=u=>i.$router.push("/logs"))},{default:l(()=>[s(v(_t)),t[36]||(t[36]=f(" 系统日志 ",-1))]),_:1,__:[36]})]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",bs,[s(H,{gutter:[16,16]},{default:l(()=>[s(m,{xs:24,lg:8},{default:l(()=>[s(C,{title:"账户概览",class:"data-card"},{extra:l(()=>[s(g,{type:"link",size:"small",onClick:t[6]||(t[6]=u=>i.$router.push("/account"))},{default:l(()=>t[37]||(t[37]=[f(" 详情 ",-1)])),_:1,__:[37]})]),default:l(()=>{var u,p,A,gt;return[a("div",Os,[a("div",ws,[t[38]||(t[38]=a("div",{class:"overview-label"},"总资金",-1)),a("div",hs,"¥"+d(((u=x.value.balance)==null?void 0:u.toLocaleString())||"--"),1)]),a("div",Ss,[t[39]||(t[39]=a("div",{class:"overview-label"},"可用资金",-1)),a("div",ks,"¥"+d(((p=x.value.available)==null?void 0:p.toLocaleString())||"--"),1)]),a("div",Cs,[t[40]||(t[40]=a("div",{class:"overview-label"},"冻结资金",-1)),a("div",$s,"¥"+d(((A=x.value.frozen)==null?void 0:A.toLocaleString())||"--"),1)]),a("div",zs,[t[41]||(t[41]=a("div",{class:"overview-label"},"保证金",-1)),a("div",Ps,"¥"+d(((gt=x.value.margin)==null?void 0:gt.toLocaleString())||"--"),1)])])]}),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s(C,{title:"风险监控",class:"data-card"},{extra:l(()=>[s(g,{type:"link",size:"small",onClick:t[7]||(t[7]=u=>i.$router.push("/risk"))},{default:l(()=>t[42]||(t[42]=[f(" 详情 ",-1)])),_:1,__:[42]})]),default:l(()=>{var u,p,A;return[a("div",Ls,[a("div",xs,[t[43]||(t[43]=a("div",{class:"overview-label"},"总盈亏",-1)),a("div",{class:S(["overview-value",W(w.value.total_pnl)])},d(w.value.total_pnl>0?"+":"")+"¥"+d(((u=w.value.total_pnl)==null?void 0:u.toLocaleString())||"--"),3)]),a("div",Ms,[t[44]||(t[44]=a("div",{class:"overview-label"},"今日盈亏",-1)),a("div",{class:S(["overview-value",W(w.value.today_pnl)])},d(w.value.today_pnl>0?"+":"")+"¥"+d(((p=w.value.today_pnl)==null?void 0:p.toLocaleString())||"--"),3)]),a("div",As,[t[45]||(t[45]=a("div",{class:"overview-label"},"最大回撤",-1)),a("div",js," ¥"+d(((A=w.value.max_drawdown)==null?void 0:A.toLocaleString())||"--"),1)]),a("div",Ts,[t[46]||(t[46]=a("div",{class:"overview-label"},"风险等级",-1)),a("div",Ds,[s(M,{color:Zt(w.value.risk_level)},{default:l(()=>[f(d(w.value.risk_level||"--"),1)]),_:1},8,["color"])])])])]}),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s(C,{title:"交易统计",class:"data-card"},{extra:l(()=>[s(g,{type:"link",size:"small",onClick:t[8]||(t[8]=u=>i.$router.push("/trading"))},{default:l(()=>t[47]||(t[47]=[f(" 详情 ",-1)])),_:1,__:[47]})]),default:l(()=>{var u;return[a("div",Rs,[a("div",Vs,[t[48]||(t[48]=a("div",{class:"overview-label"},"总交易次数",-1)),a("div",Is,d(P.value.total_trades||"--"),1)]),a("div",Hs,[t[49]||(t[49]=a("div",{class:"overview-label"},"胜率",-1)),a("div",Ns,d(P.value.win_rate||"--")+"%",1)]),a("div",Es,[t[50]||(t[50]=a("div",{class:"overview-label"},"平均盈亏",-1)),a("div",{class:S(["overview-value",W(P.value.avg_trade_pnl)])},d(P.value.avg_trade_pnl>0?"+":"")+"¥"+d(((u=P.value.avg_trade_pnl)==null?void 0:u.toLocaleString())||"--"),3)]),a("div",Bs,[t[51]||(t[51]=a("div",{class:"overview-label"},"持仓数量",-1)),a("div",Us,d(lt.value.length||"--"),1)])])]}),_:1})]),_:1})]),_:1})]),a("div",Ws,[s(C,{title:"实时行情 - 黄金主力合约",class:"market-card",bordered:!1},{extra:l(()=>[s(F,null,{default:l(()=>[s(M,{color:z.value?"blue":"green"},{default:l(()=>[f(d(z.value?"更新中...":"实时"),1)]),_:1},8,["color"]),s(g,{type:"link",size:"small",onClick:B,loading:z.value},{default:l(()=>t[52]||(t[52]=[f(" 刷新 ",-1)])),_:1,__:[52]},8,["loading"]),s(g,{type:"link",size:"small",onClick:Qt},{default:l(()=>[f(d(V.value?"展开":"收起"),1)]),_:1})]),_:1})]),default:l(()=>[s(vt,{activeKey:V.value?[]:["market"]},{default:l(()=>[s(dt,{key:"market","show-arrow":!1},{default:l(()=>[s(te,{columns:Lt,"data-source":nt.value,pagination:!1,size:"small",loading:z.value,"row-key":"symbol"},{bodyCell:l(({column:u,record:p})=>[u.key==="symbol"?(O(),N(M,{key:0,color:"gold"},{default:l(()=>[f(d(p.symbol),1)]),_:2},1024)):u.key==="last_price"?(O(),k("span",{key:1,class:S(["price",U(p.change)])},d(p.last_price),3)):u.key==="change"?(O(),k("span",{key:2,class:S(U(p.change))},d(p.change>0?"+":"")+d(p.change),3)):u.key==="change_percent"?(O(),k("span",{key:3,class:S(U(p.change))},d(p.change>0?"+":"")+d(p.change_percent)+"% ",3)):u.key==="bid_ask"?(O(),k("div",qs,[a("div",Fs,d(p.bid_price),1),a("div",Ys,d(p.ask_price),1)])):u.key==="volume"?(O(),k("span",Gs,d(p.volume),1)):u.key==="timestamp"?(O(),k("span",Js,d(p.timestamp),1)):de("",!0)]),_:1},8,["data-source","loading"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),a("div",Qs,[s(C,{title:"快速导航",class:"nav-card",bordered:!1},{extra:l(()=>[s(g,{type:"link",size:"small",onClick:Xt},{default:l(()=>[f(d(I.value?"展开":"收起"),1)]),_:1})]),default:l(()=>[s(vt,{activeKey:I.value?[]:["nav"]},{default:l(()=>[s(dt,{key:"nav","show-arrow":!1},{default:l(()=>[s(H,{gutter:[16,16]},{default:l(()=>[s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[9]||(t[9]=u=>i.$router.push("/market"))},[s(v($e),{class:"nav-icon"}),t[53]||(t[53]=a("div",{class:"nav-text"},"行情数据",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[10]||(t[10]=u=>i.$router.push("/account"))},[s(v(We),{class:"nav-icon"}),t[54]||(t[54]=a("div",{class:"nav-text"},"账户资金",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[11]||(t[11]=u=>i.$router.push("/positions"))},[s(v(xe),{class:"nav-icon"}),t[55]||(t[55]=a("div",{class:"nav-text"},"持仓管理",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[12]||(t[12]=u=>i.$router.push("/strategies"))},[s(v(J),{class:"nav-icon"}),t[56]||(t[56]=a("div",{class:"nav-text"},"策略管理",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[13]||(t[13]=u=>i.$router.push("/risk"))},[s(v(kt),{class:"nav-icon"}),t[57]||(t[57]=a("div",{class:"nav-text"},"风险控制",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[14]||(t[14]=u=>i.$router.push("/logs"))},[s(v(_t),{class:"nav-icon"}),t[58]||(t[58]=a("div",{class:"nav-text"},"系统日志",-1))])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),s(mt,{open:n.value,"onUpdate:open":t[17]||(t[17]=u=>n.value=u),title:"切换运行模式",onOk:Wt},{default:l(()=>[s(pt,{layout:"vertical"},{default:l(()=>[s(G,{label:"选择运行模式"},{default:l(()=>[s(ee,{value:c.value,"onUpdate:value":t[15]||(t[15]=u=>c.value=u)},{default:l(()=>[s(Y,{value:"FULL_TRADING"},{default:l(()=>t[59]||(t[59]=[f("完整交易模式",-1)])),_:1,__:[59]}),s(Y,{value:"MONITOR_ONLY"},{default:l(()=>t[60]||(t[60]=[f("仅监控模式",-1)])),_:1,__:[60]}),s(Y,{value:"MARKET_DATA_ONLY"},{default:l(()=>t[61]||(t[61]=[f("仅行情模式",-1)])),_:1,__:[61]})]),_:1},8,["value"])]),_:1}),s(G,{label:"切换原因"},{default:l(()=>[s(ft,{value:j.value,"onUpdate:value":t[16]||(t[16]=u=>j.value=u),placeholder:"请输入切换原因..."},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"]),s(mt,{open:o.value,"onUpdate:open":t[19]||(t[19]=u=>o.value=u),title:"紧急停止确认","confirm-loading":E.value,onOk:qt},{default:l(()=>[s(se,{message:"警告",description:"紧急停止将立即停止所有交易活动，请确认操作原因。",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),s(pt,{layout:"vertical"},{default:l(()=>[s(G,{label:"停止原因",required:""},{default:l(()=>[s(ft,{value:L.value,"onUpdate:value":t[18]||(t[18]=u=>L.value=u),placeholder:"请输入紧急停止的原因...",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])])}}});const aa=me(Xs,[["__scopeId","data-v-ebc60b8c"]]);export{aa as default};
