import{c as s,A as P,d as Oe,b as Se,r as p,e as w,o as ke,f as Ce,g as h,p as O,k as a,w as l,s as b,j as _,n as C,l as f,t as d,C as $e,m as v,R as Pe,E as ze,F as Ct,q as $t,x as Pt,h as D,y as Le}from"./index-33227a7b.js";import{P as xe,a as Me}from"./PlayCircleOutlined-7981ed29.js";import{R as st}from"./RocketOutlined-46d2410f.js";import{S as Ae}from"./StopOutlined-19cd7f8c.js";import{_ as je}from"./_plugin-vue_export-helper-c27b6911.js";var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};const Re=Te;function zt(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){De(r,c,o[c])})}return r}function De(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var at=function(e,o){var u=zt({},e,o.attrs);return s(P,zt({},u,{icon:Re}),null)};at.displayName="ApiOutlined";at.inheritAttrs=!1;const Lt=at;var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};const Ne=Ie;function xt(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){Ee(r,c,o[c])})}return r}function Ee(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var nt=function(e,o){var u=xt({},e,o.attrs);return s(P,xt({},u,{icon:Ne}),null)};nt.displayName="AppstoreOutlined";nt.inheritAttrs=!1;const Ve=nt;var He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};const Be=He;function Mt(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){Ue(r,c,o[c])})}return r}function Ue(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var lt=function(e,o){var u=Mt({},e,o.attrs);return s(P,Mt({},u,{icon:Be}),null)};lt.displayName="LineChartOutlined";lt.inheritAttrs=!1;const We=lt;var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"};const Fe=qe;function At(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){Ge(r,c,o[c])})}return r}function Ge(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var ot=function(e,o){var u=At({},e,o.attrs);return s(P,At({},u,{icon:Fe}),null)};ot.displayName="PieChartOutlined";ot.inheritAttrs=!1;const Ye=ot;var Je={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};const Qe=Je;function jt(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){Xe(r,c,o[c])})}return r}function Xe(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var rt=function(e,o){var u=jt({},e,o.attrs);return s(P,jt({},u,{icon:Qe}),null)};rt.displayName="SafetyOutlined";rt.inheritAttrs=!1;const Tt=rt;var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const Ke=Ze;function Rt(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){ts(r,c,o[c])})}return r}function ts(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var it=function(e,o){var u=Rt({},e,o.attrs);return s(P,Rt({},u,{icon:Ke}),null)};it.displayName="SettingOutlined";it.inheritAttrs=!1;const Dt=it;var es={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};const ss=es;function It(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){as(r,c,o[c])})}return r}function as(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var ut=function(e,o){var u=It({},e,o.attrs);return s(P,It({},u,{icon:ss}),null)};ut.displayName="ShoppingCartOutlined";ut.inheritAttrs=!1;const ns=ut;var ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"};const os=ls;function Nt(r){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),u.forEach(function(c){rs(r,c,o[c])})}return r}function rs(r,e,o){return e in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,r}var ct=function(e,o){var u=Nt({},e,o.attrs);return s(P,Nt({},u,{icon:os}),null)};ct.displayName="WalletOutlined";ct.inheritAttrs=!1;const is=ct,us={class:"dashboard"},cs={class:"status-bar"},ds={class:"status-icon"},vs={class:"status-info"},fs={class:"status-value"},ps={class:"status-item"},ms={class:"status-icon mode-status"},gs={class:"status-info"},_s={class:"status-value"},ys={class:"status-item"},bs={class:"status-icon services-status"},hs={class:"status-info"},ws={class:"status-value"},Os={class:"status-icon"},Ss={class:"status-info"},ks={class:"status-value"},Cs={class:"status-icon"},$s={class:"status-info"},Ps={class:"status-value"},zs={class:"status-item"},Ls={class:"status-icon uptime-status"},xs={class:"status-info"},Ms={class:"status-value"},As={class:"control-section"},js={class:"services-list"},Ts={key:0,class:"empty-services"},Rs={class:"service-info"},Ds={class:"service-name"},Is={class:"service-actions"},Ns={class:"data-section"},Es={class:"account-overview"},Vs={class:"overview-item"},Hs={class:"overview-value"},Bs={class:"overview-item"},Us={class:"overview-value"},Ws={class:"overview-item"},qs={class:"overview-value"},Fs={class:"overview-item"},Gs={class:"overview-value"},Ys={class:"risk-overview"},Js={class:"overview-item"},Qs={class:"overview-item"},Xs={class:"overview-item"},Zs={class:"overview-value risk-warning"},Ks={class:"overview-item"},ta={class:"overview-value"},ea={class:"trading-overview"},sa={class:"overview-item"},aa={class:"overview-value"},na={class:"overview-item"},la={class:"overview-value"},oa={class:"overview-item"},ra={class:"overview-item"},ia={class:"overview-value"},ua={class:"market-section"},ca={key:4,class:"bid-ask"},da={class:"bid"},va={class:"ask"},fa={key:5,class:"volume"},pa={key:6,class:"timestamp"},ma={class:"nav-section"},ga=Oe({__name:"Dashboard",setup(r){const e=Se(),o=p(!1),u=p(!1),c=p(""),I=p(""),A=p(""),F=p(!1),dt=p([]),z=p(!1),N=p(null),G=p([]),Y=p(!1),S=p(""),L=p(""),x=p([]),J=p(!1),Q=p(""),vt=p(!1),E=p({connection_status:"disconnected",total_requests:0,successful_requests:0,failed_requests:0,current_endpoint:null}),V=p(null),H=p(!1),B=p(!1),j=p({balance:0,available:0,frozen:0,margin:0}),k=p({total_pnl:0,today_pnl:0,max_drawdown:0,risk_level:"LOW"}),M=p({total_trades:0,win_rate:0,avg_trade_pnl:0}),ft=p([]),Et=[{title:"合约",key:"symbol",width:100,fixed:"left"},{title:"最新价",key:"last_price",width:100,align:"right"},{title:"涨跌",key:"change",width:80,align:"right"},{title:"涨跌幅",key:"change_percent",width:80,align:"right"},{title:"买一/卖一",key:"bid_ask",width:120,align:"right"},{title:"成交量",key:"volume",width:100,align:"right"},{title:"持仓量",key:"open_interest",width:100,align:"right"},{title:"最高",key:"high",width:80,align:"right"},{title:"最低",key:"low",width:80,align:"right"},{title:"开盘",key:"open",width:80,align:"right"},{title:"时间",key:"timestamp",width:80,align:"center"}],Vt=w(()=>e.isSystemRunning?"running":e.error?"error":"stopped"),Ht=w(()=>e.loading?"检查中...":e.isSystemRunning?"运行中":e.error?"主系统未连接":"主系统已停止"),Bt=w(()=>e.uptime),Ut=w(()=>e.error||e.currentMode==="UNKNOWN"?"Web管理模式":{FULL_TRADING:"完整交易",MONITOR_ONLY:"仅监控",MARKET_DATA_ONLY:"仅行情"}[e.currentMode]||e.currentMode),Wt=w(()=>e.servicesSummary.total),qt=w(()=>e.servicesSummary.running);w(()=>e.servicesSummary.stopped);const Ft=w(()=>{const{marketData:n,trading:t}=e.ctpStatus;return n.connected&&t.connected?"running":n.connected||t.connected?"warning":"stopped"}),Gt=w(()=>{const{marketData:n,trading:t}=e.ctpStatus;return n.connected&&t.connected?"全部连接":n.connected?"行情连接":t.connected?"交易连接":"未连接"});w(()=>{const{marketData:n,trading:t}=e.ctpStatus;return n.latency||t.latency||"--"});const Yt=w(()=>{const n=E.value.connection_status;return n==="connected"?"running":n==="connecting"?"warning":"stopped"}),Jt=w(()=>{const n=E.value.connection_status;return n==="connected"?"已连接":n==="connecting"?"连接中":n==="error"?"连接错误":"未连接"});w(()=>{const{total_requests:n,successful_requests:t}=E.value;return n===0?"0%":`${(t/n*100).toFixed(1)}%`});const Qt=async()=>{console.log("点击启动系统按钮");try{const n=await e.startSystem();console.log("启动系统结果:",n),n?b.success("系统启动成功"):b.error("系统启动失败")}catch(n){console.error("启动系统错误:",n),b.error("启动系统时发生错误")}},Xt=async()=>{await e.stopSystem()&&b.success("系统停止成功")},Zt=async n=>{await e.startService(n)&&b.success(`${n}启动成功`)},Kt=async n=>{await e.stopService(n)&&b.success(`${n}停止成功`)},te=async()=>{if(!c.value){b.error("请选择运行模式");return}await e.switchMode(c.value,I.value)&&(b.success("运行模式切换成功"),o.value=!1,I.value="")},ee=async()=>{if(!A.value.trim()){b.error("请输入停止原因");return}try{F.value=!0,await e.emergencyStop(A.value)&&(b.success("紧急停止执行成功"),u.value=!1,A.value="")}finally{F.value=!1}},se=async()=>{try{console.log("开始获取合约列表..."),Y.value=!0;const t=await(await fetch("/api/v1/data/market/contracts")).json();console.log("合约列表API响应:",t),t.success?(G.value=t.data.contracts||[],console.log("成功加载合约列表，数量:",G.value.length)):(console.error("获取合约列表失败:",t.message),b.error("获取合约列表失败"))}catch(n){console.error("获取合约列表错误:",n),b.error("获取合约列表失败")}finally{Y.value=!1}},ae=n=>{S.value=n,L.value=""},ne=()=>{L.value.trim()&&(S.value=L.value.trim().toUpperCase())},le=async()=>{if(!S.value){b.warning("请选择或输入合约代码");return}try{if(J.value=!0,x.value.includes(S.value)){b.info("该合约已在订阅列表中");return}x.value.push(S.value),await U(),b.success(`成功订阅合约: ${S.value}`),S.value="",L.value=""}catch(n){console.error("订阅合约错误:",n),b.error("订阅合约失败")}finally{J.value=!1}},oe=async()=>{try{const t=await(await fetch("/api/v1/system/config")).json();t.success&&t.data.main_contract?(Q.value=t.data.main_contract,S.value=t.data.main_contract,x.value=[t.data.main_contract],console.log("获取到主力合约:",t.data.main_contract)):console.log("未设置主力合约或获取失败"),vt.value=!0}catch(n){console.error("获取系统配置失败:",n),vt.value=!0}},U=async()=>{try{if(x.value.length===0){console.log("没有订阅的合约，跳过行情数据请求");return}z.value=!0;const n=x.value.join(","),m=await(await fetch(`/api/v1/data/market/ticks?symbols=${n}`)).json();m.success?dt.value=m.data.ticks||[]:b.error("获取行情数据失败")}catch(n){console.error("获取行情数据错误:",n),b.error("获取行情数据失败")}finally{z.value=!1}},X=n=>n>0?"price-up":n<0?"price-down":"price-unchanged",re=()=>{if(x.value.length===0){console.log("没有订阅的合约，不启动行情定时器");return}U(),N.value=setInterval(()=>{U()},2e3)},ie=()=>{N.value&&(clearInterval(N.value),N.value=null)},pt=async()=>{try{const t=await(await fetch("/api/communication/stats")).json();t.success&&(E.value=t.data)}catch(n){console.error("获取通信统计信息失败:",n)}},ue=()=>{pt(),V.value=setInterval(()=>{pt()},1e4)},ce=()=>{V.value&&(clearInterval(V.value),V.value=null)},de=()=>{H.value=!H.value},ve=()=>{B.value=!B.value},mt=async()=>{try{const t=await(await fetch("/api/v1/data/account/info")).json();t.success&&(j.value=t.data)}catch(n){console.error("获取账户信息失败:",n)}},gt=async()=>{try{const t=await(await fetch("/api/v1/data/risk/metrics")).json();t.success&&(k.value=t.data)}catch(n){console.error("获取风险指标失败:",n)}},_t=async()=>{try{const t=await(await fetch("/api/trading/summary")).json();t.success&&(M.value=t.data)}catch(n){console.error("获取交易统计失败:",n)}},yt=async()=>{try{const t=await(await fetch("/api/v1/data/account/positions")).json();t.success&&(ft.value=t.data||[])}catch(n){console.error("获取持仓信息失败:",n)}},Z=n=>n>0?"pnl-positive":n<0?"pnl-negative":"pnl-neutral",fe=n=>({LOW:"green",MEDIUM:"orange",HIGH:"red",CRITICAL:"red"})[n]||"default",pe=()=>{e.fetchServices()};let K=null;return ke(async()=>{c.value=e.currentMode,await oe(),K=window.setInterval(()=>{e.fetchSystemStatus(),e.fetchServices()},3e3),se(),Q.value?(console.log("检测到主力合约，启动行情定时器:",Q.value),re()):console.log("未设置主力合约，不启动行情定时器"),ue(),mt(),gt(),_t(),yt();const n=window.setInterval(()=>{mt(),gt(),_t(),yt()},1e4);window.dataRefreshTimer=n}),Ce(()=>{K&&clearInterval(K),window.dataRefreshTimer&&clearInterval(window.dataRefreshTimer),ie(),ce()}),(n,t)=>{const m=_("a-col"),W=_("a-row"),T=_("a-tag"),y=_("a-button"),q=_("a-space"),$=_("a-card"),me=_("a-empty"),ge=_("a-select-option"),_e=_("a-select"),ye=_("a-input"),be=_("a-table"),bt=_("a-collapse-panel"),ht=_("a-collapse"),tt=_("a-radio"),he=_("a-radio-group"),et=_("a-form-item"),wt=_("a-textarea"),Ot=_("a-form"),St=_("a-modal"),we=_("a-alert");return h(),O("div",us,[a("div",cs,[s(W,{gutter:[16,16]},{default:l(()=>[s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",{class:C(["status-item",Vt.value])},[a("div",ds,[s(f(st))]),a("div",vs,[t[22]||(t[22]=a("div",{class:"status-label"},"系统状态",-1)),a("div",fs,d(Ht.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",ps,[a("div",ms,[s(f(Dt))]),a("div",gs,[t[23]||(t[23]=a("div",{class:"status-label"},"运行模式",-1)),a("div",_s,d(Ut.value),1)])])]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",ys,[a("div",bs,[s(f(Ve))]),a("div",hs,[t[24]||(t[24]=a("div",{class:"status-label"},"服务状态",-1)),a("div",ws,d(qt.value)+"/"+d(Wt.value),1)])])]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",{class:C(["status-item",Ft.value])},[a("div",Os,[s(f(Lt))]),a("div",Ss,[t[25]||(t[25]=a("div",{class:"status-label"},"CTP连接",-1)),a("div",ks,d(Gt.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",{class:C(["status-item",Yt.value])},[a("div",Cs,[s(f(Lt))]),a("div",$s,[t[26]||(t[26]=a("div",{class:"status-label"},"主系统通信",-1)),a("div",Ps,d(Jt.value),1)])],2)]),_:1}),s(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[a("div",zs,[a("div",Ls,[s(f($e))]),a("div",xs,[t[27]||(t[27]=a("div",{class:"status-label"},"运行时长",-1)),a("div",Ms,d(Bt.value),1)])])]),_:1})]),_:1})]),a("div",As,[s(W,{gutter:[16,16]},{default:l(()=>[s(m,{xs:24,lg:8},{default:l(()=>[s($,{title:"ARBIG主系统控制",class:"control-card"},{extra:l(()=>[s(T,{color:f(e).isSystemRunning?"green":"red"},{default:l(()=>[v(d(f(e).isSystemRunning?"运行中":"已停止"),1)]),_:1},8,["color"])]),default:l(()=>[s(q,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[s(y,{type:"primary",size:"large",block:"",loading:f(e).loading,disabled:f(e).isSystemRunning,onClick:Qt},{default:l(()=>[s(f(xe)),t[28]||(t[28]=v(" 启动系统 ",-1))]),_:1,__:[28]},8,["loading","disabled"]),s(y,{size:"large",block:"",loading:f(e).loading,disabled:!f(e).isSystemRunning,onClick:Xt},{default:l(()=>[s(f(Me)),t[29]||(t[29]=v(" 停止系统 ",-1))]),_:1,__:[29]},8,["loading","disabled"]),s(y,{type:"primary",danger:"",size:"large",block:"",onClick:t[0]||(t[0]=i=>u.value=!0)},{default:l(()=>[s(f(Ae)),t[30]||(t[30]=v(" 紧急停止 ",-1))]),_:1,__:[30]}),s(y,{type:"dashed",size:"large",block:"",onClick:t[1]||(t[1]=i=>o.value=!0)},{default:l(()=>[s(f(Dt)),t[31]||(t[31]=v(" 切换模式 ",-1))]),_:1,__:[31]})]),_:1})]),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s($,{title:"服务管理",class:"control-card"},{extra:l(()=>[s(y,{type:"link",size:"small",onClick:pe},{default:l(()=>[s(f(Pe))]),_:1})]),default:l(()=>[a("div",js,[f(e).services.length===0?(h(),O("div",Ts,[s(me,{description:"暂无服务信息",image:f(ze).PRESENTED_IMAGE_SIMPLE},{description:l(()=>t[32]||(t[32]=[a("span",null,"ARBIG主系统未运行",-1),a("br",null,null,-1),a("span",{style:{"font-size":"12px",color:"#999"}},"启动主系统后可管理以下服务：",-1),a("br",null,null,-1),a("span",{style:{"font-size":"11px",color:"#666","margin-top":"8px",display:"block"}},[v(" • CTP网关服务"),a("br"),v(" • 行情数据服务"),a("br"),v(" • 交易执行服务"),a("br"),v(" • 风险控制服务"),a("br"),v(" • 策略管理服务 ")],-1)])),_:1},8,["image"])])):(h(!0),O(Ct,{key:1},$t(f(e).services,i=>(h(),O("div",{key:i.name,class:"service-item"},[a("div",Rs,[a("span",{class:C(["status-indicator",i.status])},null,2),a("span",Ds,d(i.display_name),1)]),a("div",Is,[i.status==="stopped"?(h(),D(y,{key:0,type:"primary",size:"small",onClick:g=>Zt(i.name)},{default:l(()=>t[33]||(t[33]=[v(" 启动 ",-1)])),_:2,__:[33]},1032,["onClick"])):i.status==="running"?(h(),D(y,{key:1,size:"small",onClick:g=>Kt(i.name)},{default:l(()=>t[34]||(t[34]=[v(" 停止 ",-1)])),_:2,__:[34]},1032,["onClick"])):(h(),D(y,{key:2,size:"small",disabled:""},{default:l(()=>[v(d(i.status),1)]),_:2},1024))])]))),128))])]),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s($,{title:"快速操作",class:"control-card"},{extra:l(()=>[s(T,{color:"blue"},{default:l(()=>t[35]||(t[35]=[v("快捷入口",-1)])),_:1,__:[35]})]),default:l(()=>[s(q,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[2]||(t[2]=i=>n.$router.push("/trading"))},{default:l(()=>[s(f(ns)),t[36]||(t[36]=v(" 交易操作 ",-1))]),_:1,__:[36]}),s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[3]||(t[3]=i=>n.$router.push("/strategies"))},{default:l(()=>[s(f(st)),t[37]||(t[37]=v(" 策略管理 ",-1))]),_:1,__:[37]}),s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[4]||(t[4]=i=>n.$router.push("/risk"))},{default:l(()=>[s(f(Tt)),t[38]||(t[38]=v(" 风险控制 ",-1))]),_:1,__:[38]}),s(y,{type:"primary",ghost:"",size:"large",block:"",onClick:t[5]||(t[5]=i=>n.$router.push("/logs"))},{default:l(()=>[s(f(Pt)),t[39]||(t[39]=v(" 系统日志 ",-1))]),_:1,__:[39]})]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",Ns,[s(W,{gutter:[16,16]},{default:l(()=>[s(m,{xs:24,lg:8},{default:l(()=>[s($,{title:"账户概览",class:"data-card"},{extra:l(()=>[s(y,{type:"link",size:"small",onClick:t[6]||(t[6]=i=>n.$router.push("/account"))},{default:l(()=>t[40]||(t[40]=[v(" 详情 ",-1)])),_:1,__:[40]})]),default:l(()=>{var i,g,R,kt;return[a("div",Es,[a("div",Vs,[t[41]||(t[41]=a("div",{class:"overview-label"},"总资金",-1)),a("div",Hs,"¥"+d(((i=j.value.balance)==null?void 0:i.toLocaleString())||"--"),1)]),a("div",Bs,[t[42]||(t[42]=a("div",{class:"overview-label"},"可用资金",-1)),a("div",Us,"¥"+d(((g=j.value.available)==null?void 0:g.toLocaleString())||"--"),1)]),a("div",Ws,[t[43]||(t[43]=a("div",{class:"overview-label"},"冻结资金",-1)),a("div",qs,"¥"+d(((R=j.value.frozen)==null?void 0:R.toLocaleString())||"--"),1)]),a("div",Fs,[t[44]||(t[44]=a("div",{class:"overview-label"},"保证金",-1)),a("div",Gs,"¥"+d(((kt=j.value.margin)==null?void 0:kt.toLocaleString())||"--"),1)])])]}),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s($,{title:"风险监控",class:"data-card"},{extra:l(()=>[s(y,{type:"link",size:"small",onClick:t[7]||(t[7]=i=>n.$router.push("/risk"))},{default:l(()=>t[45]||(t[45]=[v(" 详情 ",-1)])),_:1,__:[45]})]),default:l(()=>{var i,g,R;return[a("div",Ys,[a("div",Js,[t[46]||(t[46]=a("div",{class:"overview-label"},"总盈亏",-1)),a("div",{class:C(["overview-value",Z(k.value.total_pnl)])},d(k.value.total_pnl>0?"+":"")+"¥"+d(((i=k.value.total_pnl)==null?void 0:i.toLocaleString())||"--"),3)]),a("div",Qs,[t[47]||(t[47]=a("div",{class:"overview-label"},"今日盈亏",-1)),a("div",{class:C(["overview-value",Z(k.value.today_pnl)])},d(k.value.today_pnl>0?"+":"")+"¥"+d(((g=k.value.today_pnl)==null?void 0:g.toLocaleString())||"--"),3)]),a("div",Xs,[t[48]||(t[48]=a("div",{class:"overview-label"},"最大回撤",-1)),a("div",Zs," ¥"+d(((R=k.value.max_drawdown)==null?void 0:R.toLocaleString())||"--"),1)]),a("div",Ks,[t[49]||(t[49]=a("div",{class:"overview-label"},"风险等级",-1)),a("div",ta,[s(T,{color:fe(k.value.risk_level)},{default:l(()=>[v(d(k.value.risk_level||"--"),1)]),_:1},8,["color"])])])])]}),_:1})]),_:1}),s(m,{xs:24,lg:8},{default:l(()=>[s($,{title:"交易统计",class:"data-card"},{extra:l(()=>[s(y,{type:"link",size:"small",onClick:t[8]||(t[8]=i=>n.$router.push("/trading"))},{default:l(()=>t[50]||(t[50]=[v(" 详情 ",-1)])),_:1,__:[50]})]),default:l(()=>{var i;return[a("div",ea,[a("div",sa,[t[51]||(t[51]=a("div",{class:"overview-label"},"总交易次数",-1)),a("div",aa,d(M.value.total_trades||"--"),1)]),a("div",na,[t[52]||(t[52]=a("div",{class:"overview-label"},"胜率",-1)),a("div",la,d(M.value.win_rate||"--")+"%",1)]),a("div",oa,[t[53]||(t[53]=a("div",{class:"overview-label"},"平均盈亏",-1)),a("div",{class:C(["overview-value",Z(M.value.avg_trade_pnl)])},d(M.value.avg_trade_pnl>0?"+":"")+"¥"+d(((i=M.value.avg_trade_pnl)==null?void 0:i.toLocaleString())||"--"),3)]),a("div",ra,[t[54]||(t[54]=a("div",{class:"overview-label"},"持仓数量",-1)),a("div",ia,d(ft.value.length||"--"),1)])])]}),_:1})]),_:1})]),_:1})]),a("div",ua,[s($,{title:"实时行情",class:"market-card",bordered:!1},{extra:l(()=>[s(q,null,{default:l(()=>[s(q,null,{default:l(()=>[s(_e,{value:S.value,"onUpdate:value":t[9]||(t[9]=i=>S.value=i),placeholder:"选择合约",style:{width:"150px"},loading:Y.value,onChange:ae,"show-search":"","filter-option":""},{default:l(()=>[(h(!0),O(Ct,null,$t(G.value,i=>(h(),D(ge,{key:i.symbol,value:i.symbol},{default:l(()=>[v(d(i.symbol)+" - "+d(i.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading"]),s(ye,{value:L.value,"onUpdate:value":t[10]||(t[10]=i=>L.value=i),placeholder:"或输入合约代码",style:{width:"120px"},onPressEnter:ne},null,8,["value"]),s(y,{type:"primary",onClick:le,loading:J.value},{default:l(()=>t[55]||(t[55]=[v(" 订阅 ",-1)])),_:1,__:[55]},8,["loading"])]),_:1}),s(T,{color:z.value?"blue":"green"},{default:l(()=>[v(d(z.value?"更新中...":"实时"),1)]),_:1},8,["color"]),s(y,{type:"link",size:"small",onClick:U,loading:z.value},{default:l(()=>t[56]||(t[56]=[v(" 刷新 ",-1)])),_:1,__:[56]},8,["loading"]),s(y,{type:"link",size:"small",onClick:de},{default:l(()=>[v(d(H.value?"展开":"收起"),1)]),_:1})]),_:1})]),default:l(()=>[s(ht,{activeKey:H.value?[]:["market"]},{default:l(()=>[s(bt,{key:"market","show-arrow":!1},{default:l(()=>[s(be,{columns:Et,"data-source":dt.value,pagination:!1,size:"small",loading:z.value,"row-key":"symbol"},{bodyCell:l(({column:i,record:g})=>[i.key==="symbol"?(h(),D(T,{key:0,color:"gold"},{default:l(()=>[v(d(g.symbol),1)]),_:2},1024)):i.key==="last_price"?(h(),O("span",{key:1,class:C(["price",X(g.change)])},d(g.last_price),3)):i.key==="change"?(h(),O("span",{key:2,class:C(X(g.change))},d(g.change>0?"+":"")+d(g.change),3)):i.key==="change_percent"?(h(),O("span",{key:3,class:C(X(g.change))},d(g.change>0?"+":"")+d(g.change_percent)+"% ",3)):i.key==="bid_ask"?(h(),O("div",ca,[a("div",da,d(g.bid_price),1),a("div",va,d(g.ask_price),1)])):i.key==="volume"?(h(),O("span",fa,d(g.volume),1)):i.key==="timestamp"?(h(),O("span",pa,d(g.timestamp),1)):Le("",!0)]),_:1},8,["data-source","loading"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),a("div",ma,[s($,{title:"快速导航",class:"nav-card",bordered:!1},{extra:l(()=>[s(y,{type:"link",size:"small",onClick:ve},{default:l(()=>[v(d(B.value?"展开":"收起"),1)]),_:1})]),default:l(()=>[s(ht,{activeKey:B.value?[]:["nav"]},{default:l(()=>[s(bt,{key:"nav","show-arrow":!1},{default:l(()=>[s(W,{gutter:[16,16]},{default:l(()=>[s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[11]||(t[11]=i=>n.$router.push("/market"))},[s(f(We),{class:"nav-icon"}),t[57]||(t[57]=a("div",{class:"nav-text"},"行情数据",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[12]||(t[12]=i=>n.$router.push("/account"))},[s(f(is),{class:"nav-icon"}),t[58]||(t[58]=a("div",{class:"nav-text"},"账户资金",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[13]||(t[13]=i=>n.$router.push("/positions"))},[s(f(Ye),{class:"nav-icon"}),t[59]||(t[59]=a("div",{class:"nav-text"},"持仓管理",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[14]||(t[14]=i=>n.$router.push("/strategies"))},[s(f(st),{class:"nav-icon"}),t[60]||(t[60]=a("div",{class:"nav-text"},"策略管理",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[15]||(t[15]=i=>n.$router.push("/risk"))},[s(f(Tt),{class:"nav-icon"}),t[61]||(t[61]=a("div",{class:"nav-text"},"风险控制",-1))])]),_:1}),s(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[a("div",{class:"nav-item",onClick:t[16]||(t[16]=i=>n.$router.push("/logs"))},[s(f(Pt),{class:"nav-icon"}),t[62]||(t[62]=a("div",{class:"nav-text"},"系统日志",-1))])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),s(St,{open:o.value,"onUpdate:open":t[19]||(t[19]=i=>o.value=i),title:"切换运行模式",onOk:te},{default:l(()=>[s(Ot,{layout:"vertical"},{default:l(()=>[s(et,{label:"选择运行模式"},{default:l(()=>[s(he,{value:c.value,"onUpdate:value":t[17]||(t[17]=i=>c.value=i)},{default:l(()=>[s(tt,{value:"FULL_TRADING"},{default:l(()=>t[63]||(t[63]=[v("完整交易模式",-1)])),_:1,__:[63]}),s(tt,{value:"MONITOR_ONLY"},{default:l(()=>t[64]||(t[64]=[v("仅监控模式",-1)])),_:1,__:[64]}),s(tt,{value:"MARKET_DATA_ONLY"},{default:l(()=>t[65]||(t[65]=[v("仅行情模式",-1)])),_:1,__:[65]})]),_:1},8,["value"])]),_:1}),s(et,{label:"切换原因"},{default:l(()=>[s(wt,{value:I.value,"onUpdate:value":t[18]||(t[18]=i=>I.value=i),placeholder:"请输入切换原因..."},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"]),s(St,{open:u.value,"onUpdate:open":t[21]||(t[21]=i=>u.value=i),title:"紧急停止确认","confirm-loading":F.value,onOk:ee},{default:l(()=>[s(we,{message:"警告",description:"紧急停止将立即停止所有交易活动，请确认操作原因。",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),s(Ot,{layout:"vertical"},{default:l(()=>[s(et,{label:"停止原因",required:""},{default:l(()=>[s(wt,{value:A.value,"onUpdate:value":t[20]||(t[20]=i=>A.value=i),placeholder:"请输入紧急停止的原因...",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])])}}});const Oa=je(ga,[["__scopeId","data-v-f6d74284"]]);export{Oa as default};
