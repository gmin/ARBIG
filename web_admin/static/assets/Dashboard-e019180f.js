import{c as a,A as z,d as oe,b as ie,r as g,e as O,o as ce,f as ue,g as b,p as S,k as s,w as l,s as w,j as y,n as k,l as f,t as d,C as de,m as v,R as ve,E as fe,F as pe,q as me,x as bt,h as M,y as ge}from"./index-6e58ba50.js";import{P as _e,a as ye}from"./PlayCircleOutlined-932567d0.js";import{R as Q}from"./RocketOutlined-6c706408.js";import{S as be}from"./StopOutlined-90873fae.js";import{_ as Oe}from"./_plugin-vue_export-helper-c27b6911.js";var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};const he=we;function Ot(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){Se(o,u,n[u])})}return o}function Se(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var X=function(e,n){var i=Ot({},e,n.attrs);return a(z,Ot({},i,{icon:he}),null)};X.displayName="ApiOutlined";X.inheritAttrs=!1;const wt=X;var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};const Ce=ke;function ht(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){$e(o,u,n[u])})}return o}function $e(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var Z=function(e,n){var i=ht({},e,n.attrs);return a(z,ht({},i,{icon:Ce}),null)};Z.displayName="AppstoreOutlined";Z.inheritAttrs=!1;const ze=Z;var Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};const Le=Pe;function St(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){xe(o,u,n[u])})}return o}function xe(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var K=function(e,n){var i=St({},e,n.attrs);return a(z,St({},i,{icon:Le}),null)};K.displayName="LineChartOutlined";K.inheritAttrs=!1;const Me=K;var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"};const je=Ae;function kt(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){Te(o,u,n[u])})}return o}function Te(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var tt=function(e,n){var i=kt({},e,n.attrs);return a(z,kt({},i,{icon:je}),null)};tt.displayName="PieChartOutlined";tt.inheritAttrs=!1;const Re=tt;var De={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"};const Ie=De;function Ct(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){Ne(o,u,n[u])})}return o}function Ne(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var et=function(e,n){var i=Ct({},e,n.attrs);return a(z,Ct({},i,{icon:Ie}),null)};et.displayName="SafetyOutlined";et.inheritAttrs=!1;const $t=et;var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const Ee=Ve;function zt(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){He(o,u,n[u])})}return o}function He(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var st=function(e,n){var i=zt({},e,n.attrs);return a(z,zt({},i,{icon:Ee}),null)};st.displayName="SettingOutlined";st.inheritAttrs=!1;const Pt=st;var Be={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};const Ue=Be;function Lt(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){We(o,u,n[u])})}return o}function We(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var at=function(e,n){var i=Lt({},e,n.attrs);return a(z,Lt({},i,{icon:Ue}),null)};at.displayName="ShoppingCartOutlined";at.inheritAttrs=!1;const qe=at;var Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"};const Ge=Fe;function xt(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable}))),i.forEach(function(u){Ye(o,u,n[u])})}return o}function Ye(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var nt=function(e,n){var i=xt({},e,n.attrs);return a(z,xt({},i,{icon:Ge}),null)};nt.displayName="WalletOutlined";nt.inheritAttrs=!1;const Je=nt,Qe={class:"dashboard"},Xe={class:"status-bar"},Ze={class:"status-icon"},Ke={class:"status-info"},ts={class:"status-value"},es={class:"status-item"},ss={class:"status-icon mode-status"},as={class:"status-info"},ns={class:"status-value"},ls={class:"status-item"},rs={class:"status-icon services-status"},os={class:"status-info"},is={class:"status-value"},cs={class:"status-icon"},us={class:"status-info"},ds={class:"status-value"},vs={class:"status-icon"},fs={class:"status-info"},ps={class:"status-value"},ms={class:"status-item"},gs={class:"status-icon uptime-status"},_s={class:"status-info"},ys={class:"status-value"},bs={class:"control-section"},Os={class:"services-list"},ws={key:0,class:"empty-services"},hs={class:"service-info"},Ss={class:"service-name"},ks={class:"service-actions"},Cs={class:"data-section"},$s={class:"account-overview"},zs={class:"overview-item"},Ps={class:"overview-value"},Ls={class:"overview-item"},xs={class:"overview-value"},Ms={class:"overview-item"},As={class:"overview-value"},js={class:"overview-item"},Ts={class:"overview-value"},Rs={class:"risk-overview"},Ds={class:"overview-item"},Is={class:"overview-item"},Ns={class:"overview-item"},Vs={class:"overview-value risk-warning"},Es={class:"overview-item"},Hs={class:"overview-value"},Bs={class:"trading-overview"},Us={class:"overview-item"},Ws={class:"overview-value"},qs={class:"overview-item"},Fs={class:"overview-value"},Gs={class:"overview-item"},Ys={class:"overview-item"},Js={class:"overview-value"},Qs={class:"market-section"},Xs={key:4,class:"bid-ask"},Zs={class:"bid"},Ks={class:"ask"},ta={key:5,class:"volume"},ea={key:6,class:"timestamp"},sa={class:"nav-section"},aa=oe({__name:"Dashboard",setup(o){const e=ie(),n=g(!1),i=g(!1),u=g(""),R=g(""),A=g(""),U=g(!1),lt=g([]),L=g(!1),D=g(null),C=g(""),rt=g(!1),I=g({connection_status:"disconnected",total_requests:0,successful_requests:0,failed_requests:0,current_endpoint:null}),N=g(null),V=g(!1),E=g(!1),j=g({balance:0,available:0,frozen:0,margin:0}),h=g({total_pnl:0,today_pnl:0,max_drawdown:0,risk_level:"LOW"}),x=g({total_trades:0,win_rate:0,avg_trade_pnl:0}),ot=g([]),Mt=[{title:"合约",key:"symbol",width:100,fixed:"left"},{title:"最新价",key:"last_price",width:100,align:"right"},{title:"涨跌",key:"change",width:80,align:"right"},{title:"涨跌幅",key:"change_percent",width:80,align:"right"},{title:"买一/卖一",key:"bid_ask",width:120,align:"right"},{title:"成交量",key:"volume",width:100,align:"right"},{title:"持仓量",key:"open_interest",width:100,align:"right"},{title:"最高",key:"high",width:80,align:"right"},{title:"最低",key:"low",width:80,align:"right"},{title:"开盘",key:"open",width:80,align:"right"},{title:"时间",key:"timestamp",width:80,align:"center"}],At=O(()=>e.isSystemRunning?"running":e.error?"error":"stopped"),jt=O(()=>e.loading?"检查中...":e.isSystemRunning?"运行中":e.error?"主系统未连接":"主系统已停止"),Tt=O(()=>e.uptime),Rt=O(()=>e.error||e.currentMode==="UNKNOWN"?"Web管理模式":{FULL_TRADING:"完整交易",MONITOR_ONLY:"仅监控",MARKET_DATA_ONLY:"仅行情"}[e.currentMode]||e.currentMode),Dt=O(()=>e.servicesSummary.total),It=O(()=>e.servicesSummary.running);O(()=>e.servicesSummary.stopped);const Nt=O(()=>{const{marketData:r,trading:t}=e.ctpStatus;return r.connected&&t.connected?"running":r.connected||t.connected?"warning":"stopped"}),Vt=O(()=>{const{marketData:r,trading:t}=e.ctpStatus;return r.connected&&t.connected?"全部连接":r.connected?"行情连接":t.connected?"交易连接":"未连接"});O(()=>{const{marketData:r,trading:t}=e.ctpStatus;return r.latency||t.latency||"--"});const Et=O(()=>{const r=I.value.connection_status;return r==="connected"?"running":r==="connecting"?"warning":"stopped"}),Ht=O(()=>{const r=I.value.connection_status;return r==="connected"?"已连接":r==="connecting"?"连接中":r==="error"?"连接错误":"未连接"});O(()=>{const{total_requests:r,successful_requests:t}=I.value;return r===0?"0%":`${(t/r*100).toFixed(1)}%`});const Bt=async()=>{console.log("点击启动系统按钮");try{const r=await e.startSystem();console.log("启动系统结果:",r),r?w.success("系统启动成功"):w.error("系统启动失败")}catch(r){console.error("启动系统错误:",r),w.error("启动系统时发生错误")}},Ut=async()=>{await e.stopSystem()&&w.success("系统停止成功")},Wt=async r=>{await e.startService(r)&&w.success(`${r}启动成功`)},qt=async r=>{await e.stopService(r)&&w.success(`${r}停止成功`)},Ft=async()=>{if(!u.value){w.error("请选择运行模式");return}await e.switchMode(u.value,R.value)&&(w.success("运行模式切换成功"),n.value=!1,R.value="")},Gt=async()=>{if(!A.value.trim()){w.error("请输入停止原因");return}try{U.value=!0,await e.emergencyStop(A.value)&&(w.success("紧急停止执行成功"),i.value=!1,A.value="")}finally{U.value=!1}},Yt=async()=>{try{const t=await(await fetch("/api/v1/system/config")).json();t.success&&t.data.main_contract?(C.value=t.data.main_contract,selectedContract.value=t.data.main_contract,subscribedContracts.value=[t.data.main_contract],console.log("获取到主力合约:",t.data.main_contract)):console.log("未设置主力合约或获取失败"),rt.value=!0}catch(r){console.error("获取系统配置失败:",r),rt.value=!0}},W=async()=>{try{if(!C.value){console.log("没有设置主力合约，跳过行情数据请求");return}L.value=!0;const t=await(await fetch(`/api/v1/data/market/ticks?symbols=${C.value}`)).json();t.success?lt.value=t.data.ticks||[]:w.error("获取行情数据失败")}catch(r){console.error("获取行情数据错误:",r),w.error("获取行情数据失败")}finally{L.value=!1}},q=r=>r>0?"price-up":r<0?"price-down":"price-unchanged",Jt=()=>{if(!C.value){console.log("没有设置主力合约，不启动行情定时器");return}W(),D.value=setInterval(()=>{W()},2e3)},Qt=()=>{D.value&&(clearInterval(D.value),D.value=null)},it=async()=>{try{const t=await(await fetch("/api/communication/stats")).json();t.success&&(I.value=t.data)}catch(r){console.error("获取通信统计信息失败:",r)}},Xt=()=>{it(),N.value=setInterval(()=>{it()},1e4)},Zt=()=>{N.value&&(clearInterval(N.value),N.value=null)},Kt=()=>{V.value=!V.value},te=()=>{E.value=!E.value},ct=async()=>{try{const t=await(await fetch("/api/v1/data/account/info")).json();t.success&&(j.value=t.data)}catch(r){console.error("获取账户信息失败:",r)}},ut=async()=>{try{const t=await(await fetch("/api/v1/data/risk/metrics")).json();t.success&&(h.value=t.data)}catch(r){console.error("获取风险指标失败:",r)}},dt=async()=>{try{const t=await(await fetch("/api/trading/summary")).json();t.success&&(x.value=t.data)}catch(r){console.error("获取交易统计失败:",r)}},vt=async()=>{try{const t=await(await fetch("/api/v1/data/account/positions")).json();t.success&&(ot.value=t.data||[])}catch(r){console.error("获取持仓信息失败:",r)}},F=r=>r>0?"pnl-positive":r<0?"pnl-negative":"pnl-neutral",ee=r=>({LOW:"green",MEDIUM:"orange",HIGH:"red",CRITICAL:"red"})[r]||"default",se=()=>{e.fetchServices()};let G=null;return ce(async()=>{u.value=e.currentMode,await Yt(),G=window.setInterval(()=>{e.fetchSystemStatus(),e.fetchServices()},3e3),C.value?(console.log("检测到主力合约，启动行情定时器:",C.value),Jt()):console.log("未设置主力合约，不启动行情定时器"),Xt(),ct(),ut(),dt(),vt();const r=window.setInterval(()=>{ct(),ut(),dt(),vt()},1e4);window.dataRefreshTimer=r}),ue(()=>{G&&clearInterval(G),window.dataRefreshTimer&&clearInterval(window.dataRefreshTimer),Qt(),Zt()}),(r,t)=>{const m=y("a-col"),H=y("a-row"),P=y("a-tag"),_=y("a-button"),B=y("a-space"),$=y("a-card"),ae=y("a-empty"),ne=y("a-table"),ft=y("a-collapse-panel"),pt=y("a-collapse"),Y=y("a-radio"),le=y("a-radio-group"),J=y("a-form-item"),mt=y("a-textarea"),gt=y("a-form"),_t=y("a-modal"),re=y("a-alert");return b(),S("div",Qe,[s("div",Xe,[a(H,{gutter:[16,16]},{default:l(()=>[a(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[s("div",{class:k(["status-item",At.value])},[s("div",Ze,[a(f(Q))]),s("div",Ke,[t[20]||(t[20]=s("div",{class:"status-label"},"系统状态",-1)),s("div",ts,d(jt.value),1)])],2)]),_:1}),a(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[s("div",es,[s("div",ss,[a(f(Pt))]),s("div",as,[t[21]||(t[21]=s("div",{class:"status-label"},"运行模式",-1)),s("div",ns,d(Rt.value),1)])])]),_:1}),a(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[s("div",ls,[s("div",rs,[a(f(ze))]),s("div",os,[t[22]||(t[22]=s("div",{class:"status-label"},"服务状态",-1)),s("div",is,d(It.value)+"/"+d(Dt.value),1)])])]),_:1}),a(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[s("div",{class:k(["status-item",Nt.value])},[s("div",cs,[a(f(wt))]),s("div",us,[t[23]||(t[23]=s("div",{class:"status-label"},"CTP连接",-1)),s("div",ds,d(Vt.value),1)])],2)]),_:1}),a(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[s("div",{class:k(["status-item",Et.value])},[s("div",vs,[a(f(wt))]),s("div",fs,[t[24]||(t[24]=s("div",{class:"status-label"},"主系统通信",-1)),s("div",ps,d(Ht.value),1)])],2)]),_:1}),a(m,{xs:12,sm:6,md:4,lg:3},{default:l(()=>[s("div",ms,[s("div",gs,[a(f(de))]),s("div",_s,[t[25]||(t[25]=s("div",{class:"status-label"},"运行时长",-1)),s("div",ys,d(Tt.value),1)])])]),_:1})]),_:1})]),s("div",bs,[a(H,{gutter:[16,16]},{default:l(()=>[a(m,{xs:24,lg:8},{default:l(()=>[a($,{title:"ARBIG主系统控制",class:"control-card"},{extra:l(()=>[a(P,{color:f(e).isSystemRunning?"green":"red"},{default:l(()=>[v(d(f(e).isSystemRunning?"运行中":"已停止"),1)]),_:1},8,["color"])]),default:l(()=>[a(B,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[a(_,{type:"primary",size:"large",block:"",loading:f(e).loading,disabled:f(e).isSystemRunning,onClick:Bt},{default:l(()=>[a(f(_e)),t[26]||(t[26]=v(" 启动系统 ",-1))]),_:1,__:[26]},8,["loading","disabled"]),a(_,{size:"large",block:"",loading:f(e).loading,disabled:!f(e).isSystemRunning,onClick:Ut},{default:l(()=>[a(f(ye)),t[27]||(t[27]=v(" 停止系统 ",-1))]),_:1,__:[27]},8,["loading","disabled"]),a(_,{type:"primary",danger:"",size:"large",block:"",onClick:t[0]||(t[0]=c=>i.value=!0)},{default:l(()=>[a(f(be)),t[28]||(t[28]=v(" 紧急停止 ",-1))]),_:1,__:[28]}),a(_,{type:"dashed",size:"large",block:"",onClick:t[1]||(t[1]=c=>n.value=!0)},{default:l(()=>[a(f(Pt)),t[29]||(t[29]=v(" 切换模式 ",-1))]),_:1,__:[29]})]),_:1})]),_:1})]),_:1}),a(m,{xs:24,lg:8},{default:l(()=>[a($,{title:"服务管理",class:"control-card"},{extra:l(()=>[a(_,{type:"link",size:"small",onClick:se},{default:l(()=>[a(f(ve))]),_:1})]),default:l(()=>[s("div",Os,[f(e).services.length===0?(b(),S("div",ws,[a(ae,{description:"暂无服务信息",image:f(fe).PRESENTED_IMAGE_SIMPLE},{description:l(()=>t[30]||(t[30]=[s("span",null,"ARBIG主系统未运行",-1),s("br",null,null,-1),s("span",{style:{"font-size":"12px",color:"#999"}},"启动主系统后可管理以下服务：",-1),s("br",null,null,-1),s("span",{style:{"font-size":"11px",color:"#666","margin-top":"8px",display:"block"}},[v(" • CTP网关服务"),s("br"),v(" • 行情数据服务"),s("br"),v(" • 交易执行服务"),s("br"),v(" • 风险控制服务"),s("br"),v(" • 策略管理服务 ")],-1)])),_:1},8,["image"])])):(b(!0),S(pe,{key:1},me(f(e).services,c=>(b(),S("div",{key:c.name,class:"service-item"},[s("div",hs,[s("span",{class:k(["status-indicator",c.status])},null,2),s("span",Ss,d(c.display_name),1)]),s("div",ks,[c.status==="stopped"?(b(),M(_,{key:0,type:"primary",size:"small",onClick:p=>Wt(c.name)},{default:l(()=>t[31]||(t[31]=[v(" 启动 ",-1)])),_:2,__:[31]},1032,["onClick"])):c.status==="running"?(b(),M(_,{key:1,size:"small",onClick:p=>qt(c.name)},{default:l(()=>t[32]||(t[32]=[v(" 停止 ",-1)])),_:2,__:[32]},1032,["onClick"])):(b(),M(_,{key:2,size:"small",disabled:""},{default:l(()=>[v(d(c.status),1)]),_:2},1024))])]))),128))])]),_:1})]),_:1}),a(m,{xs:24,lg:8},{default:l(()=>[a($,{title:"快速操作",class:"control-card"},{extra:l(()=>[a(P,{color:"blue"},{default:l(()=>t[33]||(t[33]=[v("快捷入口",-1)])),_:1,__:[33]})]),default:l(()=>[a(B,{direction:"vertical",style:{width:"100%"}},{default:l(()=>[a(_,{type:"primary",ghost:"",size:"large",block:"",onClick:t[2]||(t[2]=c=>r.$router.push("/trading"))},{default:l(()=>[a(f(qe)),t[34]||(t[34]=v(" 交易操作 ",-1))]),_:1,__:[34]}),a(_,{type:"primary",ghost:"",size:"large",block:"",onClick:t[3]||(t[3]=c=>r.$router.push("/strategies"))},{default:l(()=>[a(f(Q)),t[35]||(t[35]=v(" 策略管理 ",-1))]),_:1,__:[35]}),a(_,{type:"primary",ghost:"",size:"large",block:"",onClick:t[4]||(t[4]=c=>r.$router.push("/risk"))},{default:l(()=>[a(f($t)),t[36]||(t[36]=v(" 风险控制 ",-1))]),_:1,__:[36]}),a(_,{type:"primary",ghost:"",size:"large",block:"",onClick:t[5]||(t[5]=c=>r.$router.push("/logs"))},{default:l(()=>[a(f(bt)),t[37]||(t[37]=v(" 系统日志 ",-1))]),_:1,__:[37]})]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",Cs,[a(H,{gutter:[16,16]},{default:l(()=>[a(m,{xs:24,lg:8},{default:l(()=>[a($,{title:"账户概览",class:"data-card"},{extra:l(()=>[a(_,{type:"link",size:"small",onClick:t[6]||(t[6]=c=>r.$router.push("/account"))},{default:l(()=>t[38]||(t[38]=[v(" 详情 ",-1)])),_:1,__:[38]})]),default:l(()=>{var c,p,T,yt;return[s("div",$s,[s("div",zs,[t[39]||(t[39]=s("div",{class:"overview-label"},"总资金",-1)),s("div",Ps,"¥"+d(((c=j.value.balance)==null?void 0:c.toLocaleString())||"--"),1)]),s("div",Ls,[t[40]||(t[40]=s("div",{class:"overview-label"},"可用资金",-1)),s("div",xs,"¥"+d(((p=j.value.available)==null?void 0:p.toLocaleString())||"--"),1)]),s("div",Ms,[t[41]||(t[41]=s("div",{class:"overview-label"},"冻结资金",-1)),s("div",As,"¥"+d(((T=j.value.frozen)==null?void 0:T.toLocaleString())||"--"),1)]),s("div",js,[t[42]||(t[42]=s("div",{class:"overview-label"},"保证金",-1)),s("div",Ts,"¥"+d(((yt=j.value.margin)==null?void 0:yt.toLocaleString())||"--"),1)])])]}),_:1})]),_:1}),a(m,{xs:24,lg:8},{default:l(()=>[a($,{title:"风险监控",class:"data-card"},{extra:l(()=>[a(_,{type:"link",size:"small",onClick:t[7]||(t[7]=c=>r.$router.push("/risk"))},{default:l(()=>t[43]||(t[43]=[v(" 详情 ",-1)])),_:1,__:[43]})]),default:l(()=>{var c,p,T;return[s("div",Rs,[s("div",Ds,[t[44]||(t[44]=s("div",{class:"overview-label"},"总盈亏",-1)),s("div",{class:k(["overview-value",F(h.value.total_pnl)])},d(h.value.total_pnl>0?"+":"")+"¥"+d(((c=h.value.total_pnl)==null?void 0:c.toLocaleString())||"--"),3)]),s("div",Is,[t[45]||(t[45]=s("div",{class:"overview-label"},"今日盈亏",-1)),s("div",{class:k(["overview-value",F(h.value.today_pnl)])},d(h.value.today_pnl>0?"+":"")+"¥"+d(((p=h.value.today_pnl)==null?void 0:p.toLocaleString())||"--"),3)]),s("div",Ns,[t[46]||(t[46]=s("div",{class:"overview-label"},"最大回撤",-1)),s("div",Vs," ¥"+d(((T=h.value.max_drawdown)==null?void 0:T.toLocaleString())||"--"),1)]),s("div",Es,[t[47]||(t[47]=s("div",{class:"overview-label"},"风险等级",-1)),s("div",Hs,[a(P,{color:ee(h.value.risk_level)},{default:l(()=>[v(d(h.value.risk_level||"--"),1)]),_:1},8,["color"])])])])]}),_:1})]),_:1}),a(m,{xs:24,lg:8},{default:l(()=>[a($,{title:"交易统计",class:"data-card"},{extra:l(()=>[a(_,{type:"link",size:"small",onClick:t[8]||(t[8]=c=>r.$router.push("/trading"))},{default:l(()=>t[48]||(t[48]=[v(" 详情 ",-1)])),_:1,__:[48]})]),default:l(()=>{var c;return[s("div",Bs,[s("div",Us,[t[49]||(t[49]=s("div",{class:"overview-label"},"总交易次数",-1)),s("div",Ws,d(x.value.total_trades||"--"),1)]),s("div",qs,[t[50]||(t[50]=s("div",{class:"overview-label"},"胜率",-1)),s("div",Fs,d(x.value.win_rate||"--")+"%",1)]),s("div",Gs,[t[51]||(t[51]=s("div",{class:"overview-label"},"平均盈亏",-1)),s("div",{class:k(["overview-value",F(x.value.avg_trade_pnl)])},d(x.value.avg_trade_pnl>0?"+":"")+"¥"+d(((c=x.value.avg_trade_pnl)==null?void 0:c.toLocaleString())||"--"),3)]),s("div",Ys,[t[52]||(t[52]=s("div",{class:"overview-label"},"持仓数量",-1)),s("div",Js,d(ot.value.length||"--"),1)])])]}),_:1})]),_:1})]),_:1})]),s("div",Qs,[a($,{title:"实时行情",class:"market-card",bordered:!1},{extra:l(()=>[a(B,null,{default:l(()=>[a(B,null,{default:l(()=>[t[54]||(t[54]=s("span",null,"主力合约:",-1)),C.value?(b(),M(P,{key:0,color:"gold"},{default:l(()=>[v(d(C.value),1)]),_:1})):(b(),M(P,{key:1,color:"red"},{default:l(()=>t[53]||(t[53]=[v("未设置",-1)])),_:1,__:[53]}))]),_:1,__:[54]}),a(P,{color:L.value?"blue":"green"},{default:l(()=>[v(d(L.value?"更新中...":"实时"),1)]),_:1},8,["color"]),a(_,{type:"link",size:"small",onClick:W,loading:L.value},{default:l(()=>t[55]||(t[55]=[v(" 刷新 ",-1)])),_:1,__:[55]},8,["loading"]),a(_,{type:"link",size:"small",onClick:Kt},{default:l(()=>[v(d(V.value?"展开":"收起"),1)]),_:1})]),_:1})]),default:l(()=>[a(pt,{activeKey:V.value?[]:["market"]},{default:l(()=>[a(ft,{key:"market","show-arrow":!1},{default:l(()=>[a(ne,{columns:Mt,"data-source":lt.value,pagination:!1,size:"small",loading:L.value,"row-key":"symbol"},{bodyCell:l(({column:c,record:p})=>[c.key==="symbol"?(b(),M(P,{key:0,color:"gold"},{default:l(()=>[v(d(p.symbol),1)]),_:2},1024)):c.key==="last_price"?(b(),S("span",{key:1,class:k(["price",q(p.change)])},d(p.last_price),3)):c.key==="change"?(b(),S("span",{key:2,class:k(q(p.change))},d(p.change>0?"+":"")+d(p.change),3)):c.key==="change_percent"?(b(),S("span",{key:3,class:k(q(p.change))},d(p.change>0?"+":"")+d(p.change_percent)+"% ",3)):c.key==="bid_ask"?(b(),S("div",Xs,[s("div",Zs,d(p.bid_price),1),s("div",Ks,d(p.ask_price),1)])):c.key==="volume"?(b(),S("span",ta,d(p.volume),1)):c.key==="timestamp"?(b(),S("span",ea,d(p.timestamp),1)):ge("",!0)]),_:1},8,["data-source","loading"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),s("div",sa,[a($,{title:"快速导航",class:"nav-card",bordered:!1},{extra:l(()=>[a(_,{type:"link",size:"small",onClick:te},{default:l(()=>[v(d(E.value?"展开":"收起"),1)]),_:1})]),default:l(()=>[a(pt,{activeKey:E.value?[]:["nav"]},{default:l(()=>[a(ft,{key:"nav","show-arrow":!1},{default:l(()=>[a(H,{gutter:[16,16]},{default:l(()=>[a(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[s("div",{class:"nav-item",onClick:t[9]||(t[9]=c=>r.$router.push("/market"))},[a(f(Me),{class:"nav-icon"}),t[56]||(t[56]=s("div",{class:"nav-text"},"行情数据",-1))])]),_:1}),a(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[s("div",{class:"nav-item",onClick:t[10]||(t[10]=c=>r.$router.push("/account"))},[a(f(Je),{class:"nav-icon"}),t[57]||(t[57]=s("div",{class:"nav-text"},"账户资金",-1))])]),_:1}),a(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[s("div",{class:"nav-item",onClick:t[11]||(t[11]=c=>r.$router.push("/positions"))},[a(f(Re),{class:"nav-icon"}),t[58]||(t[58]=s("div",{class:"nav-text"},"持仓管理",-1))])]),_:1}),a(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[s("div",{class:"nav-item",onClick:t[12]||(t[12]=c=>r.$router.push("/strategies"))},[a(f(Q),{class:"nav-icon"}),t[59]||(t[59]=s("div",{class:"nav-text"},"策略管理",-1))])]),_:1}),a(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[s("div",{class:"nav-item",onClick:t[13]||(t[13]=c=>r.$router.push("/risk"))},[a(f($t),{class:"nav-icon"}),t[60]||(t[60]=s("div",{class:"nav-text"},"风险控制",-1))])]),_:1}),a(m,{xs:12,sm:8,md:6,lg:4},{default:l(()=>[s("div",{class:"nav-item",onClick:t[14]||(t[14]=c=>r.$router.push("/logs"))},[a(f(bt),{class:"nav-icon"}),t[61]||(t[61]=s("div",{class:"nav-text"},"系统日志",-1))])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),a(_t,{open:n.value,"onUpdate:open":t[17]||(t[17]=c=>n.value=c),title:"切换运行模式",onOk:Ft},{default:l(()=>[a(gt,{layout:"vertical"},{default:l(()=>[a(J,{label:"选择运行模式"},{default:l(()=>[a(le,{value:u.value,"onUpdate:value":t[15]||(t[15]=c=>u.value=c)},{default:l(()=>[a(Y,{value:"FULL_TRADING"},{default:l(()=>t[62]||(t[62]=[v("完整交易模式",-1)])),_:1,__:[62]}),a(Y,{value:"MONITOR_ONLY"},{default:l(()=>t[63]||(t[63]=[v("仅监控模式",-1)])),_:1,__:[63]}),a(Y,{value:"MARKET_DATA_ONLY"},{default:l(()=>t[64]||(t[64]=[v("仅行情模式",-1)])),_:1,__:[64]})]),_:1},8,["value"])]),_:1}),a(J,{label:"切换原因"},{default:l(()=>[a(mt,{value:R.value,"onUpdate:value":t[16]||(t[16]=c=>R.value=c),placeholder:"请输入切换原因..."},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open"]),a(_t,{open:i.value,"onUpdate:open":t[19]||(t[19]=c=>i.value=c),title:"紧急停止确认","confirm-loading":U.value,onOk:Gt},{default:l(()=>[a(re,{message:"警告",description:"紧急停止将立即停止所有交易活动，请确认操作原因。",type:"warning","show-icon":"",style:{"margin-bottom":"16px"}}),a(gt,{layout:"vertical"},{default:l(()=>[a(J,{label:"停止原因",required:""},{default:l(()=>[a(mt,{value:A.value,"onUpdate:value":t[18]||(t[18]=c=>A.value=c),placeholder:"请输入紧急停止的原因...",rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])])}}});const ca=Oe(aa,[["__scopeId","data-v-5bfcd148"]]);export{ca as default};
