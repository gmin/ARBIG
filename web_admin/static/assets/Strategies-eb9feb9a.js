import{c as t,A as Q,d as fe,r as C,z as q,o as ve,g as k,p as H,k as w,w as a,s as _,j as r,l as x,P as ye,m as l,R as ge,t as v,h as T,y as D,x as be,B as ke,D as we}from"./index-33227a7b.js";import{_ as xe}from"./_plugin-vue_export-helper-c27b6911.js";var Oe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};const Ce=Oe;function L(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?Object(arguments[o]):{},d=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(s).filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable}))),d.forEach(function(c){Se(i,c,s[c])})}return i}function Se(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}var B=function(o,s){var d=L({},o,s.attrs);return t(Q,L({},d,{icon:Ce}),null)};B.displayName="ExportOutlined";B.inheritAttrs=!1;const $e=B;var Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};const ze=Pe;function J(i){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?Object(arguments[o]):{},d=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(s).filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable}))),d.forEach(function(c){Te(i,c,s[c])})}return i}function Te(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}var V=function(o,s){var d=J({},o,s.attrs);return t(Q,J({},d,{icon:ze}),null)};V.displayName="HistoryOutlined";V.inheritAttrs=!1;const Re=V,je={class:"strategies-page"},Ie={class:"page-header"},Ee={key:0,class:"strategy-name"},He={class:"name"},De={key:0,class:"strategy-detail"},Be={class:"strategy-params",style:{"margin-top":"16px"}},Ve={class:"strategy-stats",style:{"margin-top":"16px"}},Ae=fe({__name:"Strategies",setup(i){const o=C(!1),s=C([]),d=C(!1),c=C(!1),m=C(null),G=q({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`共 ${n} 条记录`}),f=q({name:"",type:"",symbols:[],description:""}),W={name:[{required:!0,message:"请输入策略名称"}],type:[{required:!0,message:"请选择策略类型"}],symbols:[{required:!0,message:"请选择交易品种"}]},X=[{title:"策略名称",key:"name",dataIndex:"name",width:200},{title:"类型",key:"type",dataIndex:"type",width:120,customRender:({text:n})=>A(n)},{title:"状态",key:"status",dataIndex:"status",width:100},{title:"交易品种",key:"symbols",dataIndex:"symbols",customRender:({text:n})=>n==null?void 0:n.join(", ")},{title:"总收益",key:"totalReturn",dataIndex:"totalReturn",width:100,customRender:({text:n})=>`${n==null?void 0:n.toFixed(2)}%`},{title:"创建时间",key:"createTime",dataIndex:"createTime",width:180},{title:"操作",key:"action",width:200,fixed:"right"}],Y=[{title:"参数名",key:"name",dataIndex:"name"},{title:"参数值",key:"value",dataIndex:"value"},{title:"描述",key:"description",dataIndex:"description"}],R=n=>({running:"green",stopped:"red",paused:"orange",error:"red"})[n]||"default",j=n=>({running:"运行中",stopped:"已停止",paused:"已暂停",error:"错误"})[n]||n,A=n=>({arbitrage:"套利策略",trend:"趋势策略",mean_reversion:"均值回归",custom:"自定义策略"})[n]||n,I=async()=>{o.value=!0;try{await new Promise(n=>setTimeout(n,1e3)),s.value=[{id:"1",name:"黄金套利策略",type:"arbitrage",status:"running",symbols:["au2507","au2508"],totalReturn:15.6,createTime:"2024-01-15 10:30:00",description:"基于黄金期货价差的套利策略"},{id:"2",name:"趋势跟踪策略",type:"trend",status:"stopped",symbols:["cu2507"],totalReturn:8.2,createTime:"2024-01-10 14:20:00",description:"基于移动平均线的趋势跟踪策略"}],_.success("策略列表刷新成功")}catch{_.error("刷新策略列表失败")}finally{o.value=!1}},Z=async n=>{n.loading=!0;try{await new Promise(e=>setTimeout(e,1e3)),n.status="running",_.success(`策略 ${n.name} 启动成功`)}catch{_.error("启动策略失败")}finally{n.loading=!1}},h=async n=>{n.loading=!0;try{await new Promise(e=>setTimeout(e,1e3)),n.status="stopped",_.success(`策略 ${n.name} 停止成功`)}catch{_.error("停止策略失败")}finally{n.loading=!1}},K=n=>{_.info("编辑策略功能开发中...")},ee=n=>{m.value=n,c.value=!0},te=n=>{_.info("回测功能开发中...")},ae=n=>{_.info("查看日志功能开发中...")},ne=n=>{_.info("导出策略功能开发中...")},le=n=>{_.info("删除策略功能开发中...")},oe=async()=>{try{await new Promise(n=>setTimeout(n,1e3)),d.value=!1,_.success("策略创建成功"),I()}catch{_.error("创建策略失败")}};return ve(()=>{I()}),(n,e)=>{const y=r("a-button"),M=r("a-space"),E=r("a-tag"),S=r("a-menu-item"),se=r("a-menu-divider"),re=r("a-menu"),ue=r("a-dropdown"),N=r("a-table"),ie=r("a-card"),de=r("a-input"),$=r("a-form-item"),g=r("a-select-option"),U=r("a-select"),pe=r("a-textarea"),me=r("a-form"),F=r("a-modal"),O=r("a-descriptions-item"),ce=r("a-descriptions"),P=r("a-statistic"),z=r("a-col"),_e=r("a-row");return k(),H("div",je,[w("div",Ie,[e[10]||(e[10]=w("h2",null,"策略管理",-1)),t(M,null,{default:a(()=>[t(y,{type:"primary",onClick:e[0]||(e[0]=u=>d.value=!0)},{default:a(()=>[t(x(ye)),e[8]||(e[8]=l(" 新建策略 ",-1))]),_:1,__:[8]}),t(y,{onClick:I},{default:a(()=>[t(x(ge)),e[9]||(e[9]=l(" 刷新 ",-1))]),_:1,__:[9]})]),_:1})]),t(ie,{title:"策略列表",class:"strategy-list"},{default:a(()=>[t(N,{columns:X,"data-source":s.value,loading:o.value,pagination:G,"row-key":"id"},{bodyCell:a(({column:u,record:p})=>[u.key==="name"?(k(),H("div",Ee,[w("span",He,v(p.name),1),t(E,{color:R(p.status),size:"small"},{default:a(()=>[l(v(j(p.status)),1)]),_:2},1032,["color"])])):u.key==="status"?(k(),T(E,{key:1,color:R(p.status)},{default:a(()=>[l(v(j(p.status)),1)]),_:2},1032,["color"])):u.key==="action"?(k(),T(M,{key:2},{default:a(()=>[p.status==="stopped"?(k(),T(y,{key:0,type:"primary",size:"small",onClick:b=>Z(p),loading:p.loading},{default:a(()=>e[11]||(e[11]=[l(" 启动 ",-1)])),_:2,__:[11]},1032,["onClick","loading"])):p.status==="running"?(k(),T(y,{key:1,type:"default",size:"small",onClick:b=>h(p),loading:p.loading},{default:a(()=>e[12]||(e[12]=[l(" 停止 ",-1)])),_:2,__:[12]},1032,["onClick","loading"])):D("",!0),t(y,{size:"small",onClick:b=>K(p)},{default:a(()=>e[13]||(e[13]=[l(" 编辑 ",-1)])),_:2,__:[13]},1032,["onClick"]),t(y,{size:"small",onClick:b=>ee(p)},{default:a(()=>e[14]||(e[14]=[l(" 查看 ",-1)])),_:2,__:[14]},1032,["onClick"]),t(ue,null,{overlay:a(()=>[t(re,null,{default:a(()=>[t(S,{onClick:b=>te(p)},{default:a(()=>[t(x(Re)),e[16]||(e[16]=l(" 回测 ",-1))]),_:2,__:[16]},1032,["onClick"]),t(S,{onClick:b=>ae(p)},{default:a(()=>[t(x(be)),e[17]||(e[17]=l(" 日志 ",-1))]),_:2,__:[17]},1032,["onClick"]),t(S,{onClick:b=>ne(p)},{default:a(()=>[t(x($e)),e[18]||(e[18]=l(" 导出 ",-1))]),_:2,__:[18]},1032,["onClick"]),t(se),t(S,{danger:"",onClick:b=>le(p)},{default:a(()=>[t(x(ke)),e[19]||(e[19]=l(" 删除 ",-1))]),_:2,__:[19]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[t(y,{size:"small"},{default:a(()=>[e[15]||(e[15]=l(" 更多 ",-1)),t(x(we))]),_:1,__:[15]})]),_:2},1024)]),_:2},1024)):D("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1}),t(F,{open:d.value,"onUpdate:open":e[5]||(e[5]=u=>d.value=u),title:"新建策略",width:"600px",onOk:oe,onCancel:e[6]||(e[6]=u=>d.value=!1)},{default:a(()=>[t(me,{ref:"createFormRef",model:f,rules:W,layout:"vertical"},{default:a(()=>[t($,{label:"策略名称",name:"name"},{default:a(()=>[t(de,{value:f.name,"onUpdate:value":e[1]||(e[1]=u=>f.name=u),placeholder:"请输入策略名称"},null,8,["value"])]),_:1}),t($,{label:"策略类型",name:"type"},{default:a(()=>[t(U,{value:f.type,"onUpdate:value":e[2]||(e[2]=u=>f.type=u),placeholder:"请选择策略类型"},{default:a(()=>[t(g,{value:"arbitrage"},{default:a(()=>e[20]||(e[20]=[l("套利策略",-1)])),_:1,__:[20]}),t(g,{value:"trend"},{default:a(()=>e[21]||(e[21]=[l("趋势策略",-1)])),_:1,__:[21]}),t(g,{value:"mean_reversion"},{default:a(()=>e[22]||(e[22]=[l("均值回归",-1)])),_:1,__:[22]}),t(g,{value:"custom"},{default:a(()=>e[23]||(e[23]=[l("自定义策略",-1)])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),t($,{label:"交易品种",name:"symbols"},{default:a(()=>[t(U,{value:f.symbols,"onUpdate:value":e[3]||(e[3]=u=>f.symbols=u),mode:"multiple",placeholder:"请选择交易品种"},{default:a(()=>[t(g,{value:"au2507"},{default:a(()=>e[24]||(e[24]=[l("黄金2507",-1)])),_:1,__:[24]}),t(g,{value:"ag2507"},{default:a(()=>e[25]||(e[25]=[l("白银2507",-1)])),_:1,__:[25]}),t(g,{value:"cu2507"},{default:a(()=>e[26]||(e[26]=[l("铜2507",-1)])),_:1,__:[26]})]),_:1},8,["value"])]),_:1}),t($,{label:"策略描述",name:"description"},{default:a(()=>[t(pe,{value:f.description,"onUpdate:value":e[4]||(e[4]=u=>f.description=u),placeholder:"请输入策略描述",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(F,{open:c.value,"onUpdate:open":e[7]||(e[7]=u=>c.value=u),title:"策略详情",width:"800px",footer:null},{default:a(()=>[m.value?(k(),H("div",De,[t(ce,{column:2,bordered:""},{default:a(()=>[t(O,{label:"策略名称"},{default:a(()=>[l(v(m.value.name),1)]),_:1}),t(O,{label:"策略类型"},{default:a(()=>[l(v(A(m.value.type)),1)]),_:1}),t(O,{label:"运行状态"},{default:a(()=>[t(E,{color:R(m.value.status)},{default:a(()=>[l(v(j(m.value.status)),1)]),_:1},8,["color"])]),_:1}),t(O,{label:"创建时间"},{default:a(()=>[l(v(m.value.createTime),1)]),_:1}),t(O,{label:"交易品种",span:2},{default:a(()=>{var u;return[l(v((u=m.value.symbols)==null?void 0:u.join(", ")),1)]}),_:1}),t(O,{label:"策略描述",span:2},{default:a(()=>[l(v(m.value.description),1)]),_:1})]),_:1}),w("div",Be,[e[27]||(e[27]=w("h4",null,"策略参数",-1)),t(N,{columns:Y,"data-source":m.value.params||[],pagination:!1,size:"small"},null,8,["data-source"])]),w("div",Ve,[e[28]||(e[28]=w("h4",null,"策略统计",-1)),t(_e,{gutter:16},{default:a(()=>[t(z,{span:6},{default:a(()=>[t(P,{title:"总收益",value:m.value.totalReturn,suffix:"%"},null,8,["value"])]),_:1}),t(z,{span:6},{default:a(()=>[t(P,{title:"夏普比率",value:m.value.sharpeRatio},null,8,["value"])]),_:1}),t(z,{span:6},{default:a(()=>[t(P,{title:"最大回撤",value:m.value.maxDrawdown,suffix:"%"},null,8,["value"])]),_:1}),t(z,{span:6},{default:a(()=>[t(P,{title:"胜率",value:m.value.winRate,suffix:"%"},null,8,["value"])]),_:1})]),_:1})])])):D("",!0)]),_:1},8,["open"])])}}});const Ue=xe(Ae,[["__scopeId","data-v-9750a85f"]]);export{Ue as default};
