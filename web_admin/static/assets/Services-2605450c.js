import{d as L,b as h,r as k,g as n,p as q,c as o,w as a,j as i,l as v,h as c,m as r,t as N,y as p,x as R,k as j,s as g}from"./index-86b26285.js";import{L as D}from"./LogViewer-de0b5489.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const F={class:"services-page"},O={style:{height:"600px"}},U=L({__name:"Services",setup(A){const l=h(),u=k(!1),m=k(""),f=[{title:"服务名称",dataIndex:"display_name",key:"display_name"},{title:"状态",dataIndex:"status",key:"status"},{title:"运行时长",dataIndex:"uptime",key:"uptime"},{title:"是否必需",dataIndex:"required",key:"required",customRender:({text:e})=>e?"是":"否"},{title:"操作",key:"actions"}],S=e=>({running:"green",stopped:"default",error:"red",starting:"blue",stopping:"orange"})[e]||"default",x=e=>({running:"运行中",stopped:"已停止",error:"错误",starting:"启动中",stopping:"停止中"})[e]||e,C=async e=>{await l.startService(e)&&g.success(`${e}启动成功`)},b=async e=>{await l.stopService(e)&&g.success(`${e}停止成功`)},w=async e=>{await l.restartService(e)&&g.success(`${e}重启成功`)},$=e=>{m.value=e,u.value=!0},M=e=>({main_system:"main",ctp_gateway:"main",market_data:"main",trading:"main",risk:"main",web_admin:"web_admin"})[e]||"main";return(e,t)=>{const V=i("a-tag"),d=i("a-button"),I=i("a-space"),z=i("a-table"),B=i("a-card"),T=i("a-modal");return n(),q("div",F,[o(B,{title:"服务管理"},{default:a(()=>[o(z,{columns:f,"data-source":v(l).services,loading:v(l).loading,"row-key":"name"},{bodyCell:a(({column:_,record:s})=>[_.key==="status"?(n(),c(V,{key:0,color:S(s.status)},{default:a(()=>[r(N(x(s.status)),1)]),_:2},1032,["color"])):p("",!0),_.key==="actions"?(n(),c(I,{key:1},{default:a(()=>[s.status==="stopped"?(n(),c(d,{key:0,type:"primary",size:"small",onClick:y=>C(s.name)},{default:a(()=>t[1]||(t[1]=[r(" 启动 ",-1)])),_:2,__:[1]},1032,["onClick"])):s.status==="running"?(n(),c(d,{key:1,size:"small",onClick:y=>b(s.name)},{default:a(()=>t[2]||(t[2]=[r(" 停止 ",-1)])),_:2,__:[2]},1032,["onClick"])):p("",!0),o(d,{size:"small",onClick:y=>w(s.name),disabled:s.status!=="running"},{default:a(()=>t[3]||(t[3]=[r(" 重启 ",-1)])),_:2,__:[3]},1032,["onClick","disabled"]),o(d,{size:"small",onClick:y=>$(s.name)},{default:a(()=>[o(v(R)),t[4]||(t[4]=r(" 日志 ",-1))]),_:2,__:[4]},1032,["onClick"])]),_:2},1024)):p("",!0)]),_:1},8,["data-source","loading"])]),_:1}),o(T,{open:u.value,"onUpdate:open":t[0]||(t[0]=_=>u.value=_),title:`${m.value} - 日志查看`,width:"90%",footer:null,"destroy-on-close":!0},{default:a(()=>[j("div",O,[u.value?(n(),c(D,{key:0,"default-service":M(m.value)},null,8,["default-service"])):p("",!0)])]),_:1},8,["open","title"])])}}});const K=E(U,[["__scopeId","data-v-8ce15ca4"]]);export{K as default};
